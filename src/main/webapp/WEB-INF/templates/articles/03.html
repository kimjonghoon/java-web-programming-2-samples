<html xmlns:th="http://www.thymeleaf.org">

<head>
<title>Bulletin Board System</title>
<meta name="Keywords" content="Thymeleaf,jwp2samples,thymeleaf-spring6,jetty plugin,Java-based Configuration,Prototype,Thymeleaf base layout,css positioning,tomcat,how to deploy app to tomcat,ROOT.xml,mvn clean compile war:inplace,mvn clean jetty:run,i18n,homepage,MessageSource,Bean Validation,Sign Up,Login,Change Password,Bulletin Board System" />
<meta name="Description" content="This article covers examples for Thymeleaf, Spring, Spring Security, Mybatis Spring, i18n, MessageSource and Bean Validation." />
<link rel="stylesheet" media="all" href="../../../static/css/ko.css" />
<link rel="stylesheet" media="all" href="../../../static/css/screen.css" />
<link rel="stylesheet" media="all" href="../../../static/css/prettify.css" />
<script src="../../../static/js/run_prettify.js"></script>
</head>

<body>

<article id="get-started">

<h1>게시판</h1>

<h2>게시판 URL</h2>

<pre style="border: 2px dotted grey;padding: 0.3em;">목록		GET /bbs/chat?page=1&amp;search=
내용		GET /bbs/chat/54?page=1&amp;search=
등록		POST /bbs/chat
수정		PUT /bbs/chat/54?page=1&amp;search=
삭제		DELETE /bbs/chat/54?page=1&amp;search=
</pre>
</article>

<article id="prototype">
<h2>프로토타입</h2>

<div class="filename">articles/list.html</div>
<pre class="prettyprint">&lt;html xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
&lt;title&gt;자유게시판&lt;/title&gt;
&lt;meta name="Keywords" content="List" /&gt;
&lt;meta name="Description" content="List" /&gt;
&lt;link rel="stylesheet" media="screen" href="../../../static/css/screen.css" /&gt;
&lt;link rel="stylesheet" media="screen" href="../../../static/css/ko.css" /&gt;
&lt;style&gt;
article {
  width: 777px;
  margin: 0 auto;
}
&lt;/style&gt;
&lt;script src="../../../static/js/jquery.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;article&gt;
&lt;script th:inline="javascript"&gt;
$(document).ready(function() {
  $('#new-post-btn').click(function() {
    var $form = $('#writeForm');
    if ($form.is(':hidden') === true) {
      $form.show();
    } else {
      $form.hide();
    }
  });
});
&lt;/script&gt;
&lt;div id="content-categories"&gt;자유게시판&lt;/div&gt;
&lt;div style="text-align: right;"&gt;
  &lt;select id="numberPerPage"&gt;
    &lt;option value=""&gt;페이지당 게시글 수&lt;/option&gt;
    &lt;option value="10"&gt;10&lt;/option&gt;
    &lt;option value="20"&gt;20&lt;/option&gt;
    &lt;option value="50"&gt;50&lt;/option&gt;
    &lt;option value="100"&gt;100&lt;/option&gt;
  &lt;/select&gt;
&lt;/div&gt;
&lt;table class="bbs-table" id="list-table"&gt;
&lt;tr&gt;
  &lt;th style="width: 60px;text-align: center;"&gt;NO&lt;/th&gt;
  &lt;th&gt;TITLE&lt;/th&gt;
  &lt;th style="width: 84px;text-align: center;"&gt;DATE&lt;/th&gt;
  &lt;th style="width: 60px;text-align: center;"&gt;HIT&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td style="text-align: center;"&gt;405&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" title="23488"&gt;자바 웹 프로그래밍 2 최종 소스&lt;/a&gt;&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;24 10 20&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td style="text-align: center;"&gt;404&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" title="23486"&gt;우분투 24.04에 자바 개발 환경&lt;/a&gt;&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;24 07 15&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td style="text-align: center;"&gt;403&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" title="23466"&gt;스프링 자바 기반 설정&lt;/a&gt;&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;24 07 15&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td style="text-align: center;"&gt;402&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" title="23087"&gt;다음 글, 이전 글 기능 수정&lt;/a&gt;&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;24 04 22&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td style="text-align: center;"&gt;401&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" title="23086"&gt;페이징 처리&lt;/a&gt;&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;24 04 16&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td style="text-align: center;"&gt;400&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" title="23059"&gt;간단한 Spring MyBatis 예제&lt;/a&gt;&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;24 04 08&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td style="text-align: center;"&gt;399&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" title="23053"&gt;윈도에서 책 에제 테스트 방법&lt;/a&gt;&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;24 04 02&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td style="text-align: center;"&gt;398&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" title="22400"&gt;자바 9 모듈&lt;/a&gt;&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;24 02 09&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td style="text-align: center;"&gt;397&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" title="19746"&gt;우분투에 MariaDB 설치&lt;/a&gt;&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;22 11 18&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td style="text-align: center;"&gt;396&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" title="19212"&gt;스프링 MVC에서 Thymeleaf 레이아웃 사용&lt;/a&gt;&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;22 08 17&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;div id="paging"&gt;
  &lt;a href="#" title="1"&gt;[처음]&lt;/a&gt;
  &lt;a href="#" title="10"&gt;[이전]&lt;/a&gt;
  &lt;span class="bbs-strong"&gt;11&lt;/span&gt;
  &lt;a href="#" title="12"&gt;[ 12 ]&lt;/a&gt;
  &lt;a href="#" title="13"&gt;[ 13 ]&lt;/a&gt;
  &lt;a href="#" title="14"&gt;[ 14 ]&lt;/a&gt;
  &lt;a href="#" title="15"&gt;[ 15 ]&lt;/a&gt;
  &lt;a href="#" title="16"&gt;[ 16 ]&lt;/a&gt;
  &lt;a href="#" title="17"&gt;[ 17 ]&lt;/a&gt;
  &lt;a href="#" title="18"&gt;[ 18 ]&lt;/a&gt;
  &lt;a href="#" title="19"&gt;[ 19 ]&lt;/a&gt;
  &lt;a href="#" title="20"&gt;[ 20 ]&lt;/a&gt;
  &lt;a href="#" title="21"&gt;[다음]&lt;/a&gt;
  &lt;a href="#" title="41"&gt;[마지막]&lt;/a&gt;
&lt;/div&gt;
&lt;div&gt;
  &lt;input type="button" value="새 글쓰기" id="new-post-btn" /&gt;
&lt;/div&gt;
&lt;form id="searchForm" action="/bbs/chat" method="get"&gt;
  &lt;input type="hidden" name="page" value="1" /&gt;
  &lt;div id="search"&gt;
    &lt;input type="text" name="search" size="15" maxlength="30" /&gt;
    &lt;input type="submit" value="검색" /&gt;
  &lt;/div&gt;
&lt;/form&gt;
&lt;form id="writeForm" action="/bbs/chat" method="post" style="display: none;"&gt;
&lt;table id="write-form" class="bbs-table"&gt;
&lt;caption&gt;새 글쓰기&lt;/caption&gt;
&lt;tr&gt;
  &lt;td&gt;제목&lt;/td&gt;
  &lt;td&gt;&lt;input type="text" name="title" id="title" style="width: 90%" /&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td colspan="2"&gt;
    &lt;textarea id="writeForm-ta" name="content" rows="10" cols="50"&gt;
    &lt;/textarea&gt;
  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td colspan="2"&gt;
    &lt;input type="submit" value="전송" /&gt;
  &lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/form&gt;
&lt;div id="form-group"&gt;
  &lt;form id="listForm" method="get"&gt;
    &lt;input type="hidden" name="page" /&gt;
    &lt;input type="hidden" name="search" value="test" th:value="${param.search }" /&gt;
  &lt;/form&gt;
  &lt;form id="viewForm" action="/bbs/chat/" method="get"&gt;
    &lt;input type="hidden" name="page" value="1" th:value="${param.page }" /&gt;
    &lt;input type="hidden" name="search" value="test" th:value="${param.search }" /&gt;
  &lt;/form&gt;
&lt;/div&gt;
&lt;/article&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

<div class="filename">articles/view.html</div>
<pre class="prettyprint">&lt;html xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
&lt;title&gt;내용보기&lt;/title&gt;
&lt;meta name="Keywords" content="View details" /&gt;
&lt;meta name="Description" content="View details" /&gt;
&lt;link rel="stylesheet" media="screen" href="../../../static/css/ko.css" /&gt;
&lt;link rel="stylesheet" media="screen" href="../../../static/css/screen.css" /&gt;
&lt;style&gt;
article {
  width: 777px;
  margin: 0 auto;
}
&lt;/style&gt;
&lt;script src="../../../static/js/jquery.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;article&gt;
&lt;script th:inline="javascript"&gt;
$(document).ready(function() {
  $('#edit-post-btn').click(function() {
    var $div = $('#detail');
    var $form = $('#editForm');
    if ($form.is(':hidden') === true) {
      $form.show();
      $div.hide();
    } else {
      $form.hide();
      $div.show();
    }
  });
});
&lt;/script&gt;
&lt;div id="content-categories"&gt;자유게시판&lt;/div&gt;
&lt;div style="height: 22px;"&gt;
  &lt;div style="float: left;"&gt;
    &lt;input type="button" value="수정" id="edit-post-btn" /&gt;
    &lt;input type="button" value="삭제" id="del-post-btn" /&gt;
  &lt;/div&gt;
  &lt;div style="float: right;"&gt;
    &lt;input type="button" value="다음 글" title="23489" id="next-post-btn" /&gt;
    &lt;input type="button" value="이전 글" title="13087" id="prev-post-btn" /&gt;
    &lt;input type="button" value="목록" id="list-btn" /&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;div id="detail"&gt;
&lt;table class="bbs-table"&gt;
&lt;tr&gt;
  &lt;th style="width: 50px;text-align: left;vertical-align: top;font-size: 15px;"&gt;TITLE&lt;/th&gt;
  &lt;th style="text-align: left;color: #555;font-size: 15px;" id="post-title"&gt;자바 웹 프로그래밍 2 최종 소스&lt;/th&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;div id="date-writer-hit"&gt;edited 24 07 15 오후 8:18:39 by hoon, hit 4&lt;/div&gt;
&lt;div id="post-content"&gt;
자바 웹 프로그래밍 2 예제&lt;br /&gt;
https://github.com/kimjonghoon/java-web-programming-2-samples
  &lt;/div&gt;
&lt;/div&gt;
&lt;form id="editForm" method="post" style="display: none;"&gt;
&lt;input type="hidden" name="page" value="1" /&gt;
&lt;input type="hidden" name="search" value="" /&gt;
&lt;table id="write-form" class="bbs-table"&gt;
&lt;caption&gt;수정&lt;/caption&gt;
&lt;tr&gt;
  &lt;td&gt;제목&lt;/td&gt;
  &lt;td&gt;&lt;input name="title" type="text" value="웹 프로그래밍 2 최종 소스" style="width: 90%" /&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td colspan="2"&gt;
&lt;textarea id="editForm-ta" name="content" rows="10" style="width: 100%"&gt;
자바 웹 프로그래밍 2 예제&lt;br /&gt;
https://github.com/kimjonghoon/java-web-programming-2-samples
&lt;/textarea&gt;
  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td colspan="2"&gt;&lt;input type="submit" value="전송" /&gt;&lt;/td&gt;
&lt;/table&gt;
&lt;/form&gt;
&lt;table class="bbs-table" id="list-table"&gt;
&lt;tr&gt;
  &lt;th style="width: 60px;text-align: center;"&gt;NO&lt;/th&gt;
  &lt;th&gt;TITLE&lt;/th&gt;
  &lt;th style="width: 84px;text-align: center;"&gt;DATE&lt;/th&gt;
  &lt;th style="width: 60px;text-align: center;"&gt;HIT&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td style="text-align: center;"&gt;405&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" title="23488"&gt;자바 웹 프로그래밍 2 최종 소스&lt;/a&gt;&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;24 10 20&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td style="text-align: center;"&gt;404&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" title="23486"&gt;우분투 24.04에 자바 개발 환경&lt;/a&gt;&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;24 07 15&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td style="text-align: center;"&gt;403&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" title="23466"&gt;스프링 자바 기반 설정&lt;/a&gt;&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;24 07 15&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td style="text-align: center;"&gt;402&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" title="23087"&gt;다음 글, 이전 글 기능 수정&lt;/a&gt;&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;24 04 22&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td style="text-align: center;"&gt;401&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" title="23086"&gt;페이징 처리&lt;/a&gt;&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;24 04 16&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td style="text-align: center;"&gt;400&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" title="23059"&gt;간단한 Spring MyBatis 예제&lt;/a&gt;&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;24 04 08&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td style="text-align: center;"&gt;399&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" title="23053"&gt;윈도에서 책 에제 테스트 방법&lt;/a&gt;&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;24 04 02&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td style="text-align: center;"&gt;398&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" title="22400"&gt;자바 9 모듈&lt;/a&gt;&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;24 02 09&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td style="text-align: center;"&gt;397&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" title="19746"&gt;우분투에 MariaDB 설치&lt;/a&gt;&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;22 11 18&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td style="text-align: center;"&gt;396&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" title="19212"&gt;스프링 MVC에서 Thymeleaf 레이아웃 사용&lt;/a&gt;&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;22 08 17&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;div id="paging"&gt;
  &lt;a href="#" title="1"&gt;[처음]&lt;/a&gt;
  &lt;a href="#" title="10"&gt;[이전]&lt;/a&gt;
  &lt;span class="bbs-strong"&gt;11&lt;/span&gt;
  &lt;a href="#" title="12"&gt;[ 12 ]&lt;/a&gt;
  &lt;a href="#" title="13"&gt;[ 13 ]&lt;/a&gt;
  &lt;a href="#" title="14"&gt;[ 14 ]&lt;/a&gt;
  &lt;a href="#" title="15"&gt;[ 15 ]&lt;/a&gt;
  &lt;a href="#" title="16"&gt;[ 16 ]&lt;/a&gt;
  &lt;a href="#" title="17"&gt;[ 17 ]&lt;/a&gt;
  &lt;a href="#" title="18"&gt;[ 18 ]&lt;/a&gt;
  &lt;a href="#" title="19"&gt;[ 19 ]&lt;/a&gt;
  &lt;a href="#" title="20"&gt;[ 20 ]&lt;/a&gt;
  &lt;a href="#" title="21"&gt;[다음]&lt;/a&gt;
  &lt;a href="#" title="41"&gt;[마지막]&lt;/a&gt;
&lt;/div&gt;
&lt;form id="searchForm" action="/bbs/chat" method="get"&gt;
  &lt;input type="hidden" name="page" value="1" /&gt;
  &lt;div style="text-align: center;"&gt;
    &lt;input type="text" name="search" size="15" maxlength="30" /&gt;
    &lt;input type="submit" value="검색" th:value="#{search}" /&gt;
  &lt;/div&gt;
&lt;/form&gt;
&lt;div id="form-group" style="display: none"&gt;
  &lt;form id="listForm" action="/bbs/chat" method="get"&gt;
    &lt;input type="hidden" name="page" value="11" th:value="${param.page}" /&gt;
    &lt;input type="hidden" name="search" value="test" th:value="${param.search}" /&gt;
  &lt;/form&gt;
  &lt;form id="viewForm" action="/bbs/chat/" method="get"&gt;
    &lt;input type="hidden" name="page" value="11" th:value="${param.page}" /&gt;
    &lt;input type="hidden" name="search" value="test" th:value="${param.search}" /&gt;
  &lt;/form&gt;
  &lt;form id="delForm" action="/bbs/chat/52" method="post" th:method="DELETE"&gt;
    &lt;input type="hidden" name="page" value=""11 th:value="${param.page}" /&gt;
    &lt;input type="hidden" name="search" value="test" th:value="${param.search}" /&gt;
  &lt;/form&gt;
&lt;/div&gt;
&lt;/article&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

<pre class="prettyprint">.bbs-table {
  width: 100%;
  margin: 0.7em 0 0 0;
}
.bbs-table &gt; caption {
  color: #555;
  font-size: 15px;
  font-weight: bold;
  text-align: left;  
}
.bbs-table th {
  color: #92B91C;
  border-top: 1px solid #92B91C;
  border-bottom: 1px solid #92B91C;
}
.bbs-table td {
  padding-top: 3px;
  padding-bottom: 3px;
  border-bottom: 1px solid silver;
  line-height: 1.45;
}
.bbs-table td a {
  color: #555;
  text-decoration: none;
}
.bbs-table td a:hover {
  color: #555;
  text-decoration: underline;
}
#paging {
  text-align: center;
  font-size: 14px;
}
#paging &gt; a {
  color: #555;
  text-decoration: none;
}
#paging &gt; a:hover {
  color: #555;
  text-decoration: underline;
}
.bbs-strong {
  color: #FFA500;
  font-weight: bold;
}
#write-form td {
  border: none;
}
#write-form textarea {
  width: 99%;
}
#content-categories {
  margin: 0;
  padding-top: 10px;
  font-family: Arial, "Helvetica Neue", Helvetica, sans-serif;
  font-size: 12px;
  color: #666;
  margin-bottom: 15px;
}
#date-writer-hit {
  display: block;
  margin: 0;
  padding: 0;
  font-size: 12px;
  color: #555;
  text-align: right;
}
#post-content {
  font-size: 15px;
  color: #333;
  min-height: 100px;
}
</pre>

<p>
<img src="../../../static/images/bbs-list-prototype.png" th:src="@{/static/images/bbs-list-prototype.png}" class="browser-output" alt="게시판 목록 프로토타입" />
</p>

<p>
<img src="../../../static/images/bbs-list-prototype2.png" th:src="@{/static/images/bbs-list-prototype2.png}" class="browser-output" alt="게시판 목록 프로토타입" />
</p>

<p>
<img src="../../../static/images/bbs-view-prototype.png" th:src="@{/static/images/bbs-view-prototype.png}" class="browser-output" alt="게시판 내용보기 화면 프로토타입" />
</p>

<p>
<img src="../../../static/images/bbs-view-prototype2.png" th:src="@{/static/images/bbs-view-prototype2.png}" class="browser-output" alt="게시판 내용보기 화면 프로토타입" />
</p>
</article>

<article id="javascript">

<h2>자바스크립트</h2>

<div class="filename">list.html</div>
<pre class="prettyprint">$(document).ready(function() {
  $('#new-post-btn').click(function() {
    var $form = $('#writeForm');
    if ($form.is(':hidden') === true) {
      $form.show();
    } else {
      $form.hide();
    }
  });
  // 페이지당 게시글 수
  $('#numberPerPage').change(function() {
    var numberPerPage = $('#numberPerPage option:selected').val();
    if (numberPerPage) {
      createCookie('numberPerPage', numberPerPage, '30'); //30일
      $('#listForm input[name*=page]').val('1');
      $('#listForm').submit();
    }
  });
});
function createCookie(name, value, days) {
  var newCookie = name + "=" + escape(value);
  if (days) {
    var expires = new Date();
    expires.setTime(expires.getTime() + days * 24 * 60 * 60 * 1000);
    newCookie += "; expires=" + expires.toGMTString();
  }
  document.cookie = newCookie;
}
</pre>

<pre class="prettyprint">$('.bbs-table tr td:nth-child(2) a').click(function(e) {
  e.preventDefault();
  $postNo = $(this).attr('title');
  $action = $('#viewForm').attr('action');
  $action += $postNo;
  $('#viewForm').attr('action', $action);
  $('#viewForm').submit();
});
</pre>

<pre class="prettyprint">$('#paging a').click(function(e) {
  e.preventDefault();
  $page = $(this).attr('title');
  $('#listForm input[name*=page]').val($page);
  $('#listForm').submit();
});
</pre>

<pre class="prettyprint">$('#searchForm').submit(function() {
  $search = $('#searchForm input[name*=search]').val();
  $search = $.trim($search);
  $('#searchForm input[name*=search]').val($search);
  $('#searchForm').submit();
});
</pre>

<pre class="prettyprint">$('#writeForm').submit(function() {
  var title = $('#writeForm input[name*=title]').val();
  title = $.trim(title);
  var content = $('#writeForm-ta').val();
  content = $.trim(content);
  if (title.length === 0) {
    var warning = /*[[#{title.empty.warning}]]*/ "제목이 비었습니다!";
    alert(warning);
    $('#writeForm input[name*=title]').val('');
    return false;
  }
  if (content.length === 0) {
    var warning = /*[[#{content.empty.warning}]]*/ "내용이 비었습니다!";
    alert(warning);
    $('#writeForm-ta').val('');
    return false;
  }
  $('#writeForm input[name*=title]').val(title);
  $('#writeForm-ta').val(content);
});
</pre>

<pre class="prettyprint">&lt;p&gt;12.07.(토) 06:50 현재 - <strong>[[${weather}]]</strong>&lt;/p&gt;</pre>

<pre class="prettyprint">&lt;p&gt;12.07.(토) 06:50 현재 - <strong>&lt;span th:text="${weather}"&gt;</strong>-3.9℃ 체감(-3.9℃)<strong>&lt;/span&gt;</strong>&lt;/p&gt;</pre>

<pre class="prettyprint">&lt;script <strong>th:inline="javascript"</strong>&gt;
..
&lt;/script&gt;
</pre>

<pre class="prettyprint">var warning = <strong>"</strong>제목이 비었습니다!<strong>"</strong>;</pre>

<div class="filename">messages_en.properties</div>
<pre class="prettyprint">title.empty.warning=The title is empty!
content.empty.warning=The content is empty!
</pre>

<div class="filename">messages_ko.properties</div>
<pre class="prettyprint">title.empty.warning=제목이 비었습니다!
content.empty.warning=내용이 비었습니다!
</pre>

<pre class="prettyprint">$(document).ready(function () {
  $('#edit-post-btn').click(function() {
    var $div = $('#detail');
    var $form = $('#editForm');
    if ($form.is(':hidden') === true) {
      $form.show();
      $div.hide();
    } else {
      $form.hide();
      $div.show();
    }
  });
  
  //TODO
  
});
</pre>

<pre class="prettyprint">$('title').empty();
var title = $('#post-title').html();
$('title').append(title);
</pre>

<pre class="prettyprint" th:inline="none">$('#del-post-btn').click(function () {
  var warning = /*[[#{delete.confirm}]]*/ "정말로 삭제하겠습니까?";    
  var chk = confirm(warning);
  if (chk === true) {
    $('#delForm').submit();
  }
});
</pre>

<div class="filename">messages_en.properties</div>
<pre class="prettyprint">delete.confirm = Are you sure you want to delete this item?
</pre>

<div class="filename">messages_ko.properties</div>
<pre class="prettyprint">delete.confirm = 정말로 삭제하겠습니까?
</pre>

<pre class="prettyprint" th:inline="none">$('#next-post-btn').click(function () {
  $postNo = $(this).attr('title');
  $action = $('#viewForm').attr('action');
  $action += $postNo;
  $('#viewForm').attr('action', $action);
  <strong>$firstItemNo = $('#list-table tr:nth-child(2) td:nth-child(2) a').attr('title');</strong>
  <strong>if (parseInt($postNo) &gt; parseInt($firstItemNo)) {</strong>
    <strong>$page = /*[[${param.page[0]} - 1]]*/ 11 - 1;</strong>
    <strong>$('#viewForm input[name*=page]').val($page);</strong>
  <strong>}</strong>
  $('#viewForm').submit();
});
</pre>

<p>
<img src="../../../static/images/next-post-page-calculate.png" th:src="@{/static/images/next-post-page-calculate.png}" class="browser-output" alt="다음 글 버튼 클릭했을 때 현재 페이지 계산" />
</p>

<pre class="prettyprint" th:inline="none">$('#prev-post-btn').click(function () {
  $postNo = $(this).attr('title');
  $action = $('#viewForm').attr('action');
  $action += $postNo;
  $('#viewForm').attr('action', $action);
  <strong>$lastItemNo = $('#list-table tr:last-child td:nth-child(2) a').attr('title');</strong>
  <strong>if (parseInt($postNo) &lt; parseInt($lastItemNo)) {</strong>
    <strong>$page = /*[[${param.page[0]} + 1]]*/ 11 + 1;</strong>
    <strong>$('#viewForm input[name*=page]').val($page);</strong>
  <strong>}</strong>
  $('#viewForm').submit();
});
</pre>

<p>
<img src="../../../static/images/prev-post-page-calculate.png" th:src="@{/static/images/prev-post-page-calculate.png}" class="browser-output" alt="이전 글 버튼 클릭했을 때 현재 페이지 계산" />
</p>

<h4>목록 버튼을 클릭했을 때 동작하는 코드</h4>

<pre class="prettyprint">$('#list-btn').click(function () {
  $('#listForm').submit();
});
</pre>

<h4>페이지당 게시글 수 선택박스에서 값을 선택했을 때 동작하는 코드</h4>

<pre class="prettyprint">$('#numberPerPage').change(function() {
  var numberPerPage = $('#numberPerPage option:selected').val();
  if (numberPerPage) {
    createCookie('numberPerPage', numberPerPage, '30');
    $('#listForm input[name*=page].val('1');
    $('#listForm').submit();
  }
});
</pre>

<pre class="prettyprint">function createCookie(name, value, days) {
  var newCookie = name + "=" + escape(value);
  if (days) {
    var expires = new Date();
    expires.setTime(expires.getTime() + days * 24 * 60 * 60 * 1000);
    newCookie += "; expires=" + expires.toGMTString();
  }
  document.cookie = newCookie;
}
</pre>

<h4>목록 테이블에서 제목을 클릭했을 때 동작하는 코드</h4>

<pre class="prettyprint">$('#list-table tr td:nth-child(2) a').click(function(e) {
  e.preventDefault();
  $postNo = $(this).attr('title');
  $action = $('#viewForm').attr('action');
  $action += $postNo;
  $('#viewForm').attr('action',$action);
  $('#viewForm').submit();
});
</pre>

<h4>페이지 이동 링크를 클릭했을 때 동작하는 코드</h4>

<pre class="prettyprint">$('#paging a').click(function(e) {
  e.preventDefault();
  $page = $(this).attr('title');
  $('#listForm input[name*=page]').val($page);
  $('#listForm').submit();
});
</pre>

<h4>검색 버튼 클릭했을 때 동작하는 코드</h4>
	
<pre class="prettyprint">$('#searchForm').submit(function() {
  $search = $('#searchForm input[name*=search]').val();
  $search = $.trim($search);
  $('#searchForm input[name*=search]').val($search);
  $('#searchForm').submit();
});
</pre>

<h4>수정 양식을 작성한 후 전송 버튼을 눌렀을 때 동작하는 코드</h4>
	
<pre class="prettyprint">$('#editForm').submit(function() {
  var title = $('#editForm input[name*=title]').val();
  title = $.trim(title);
  if (title.length === 0) {
    var warning = /*[[#{title.empty.warning}]]*/ "제목이 비었습니다!";
    alert(warning);
    $('#editForm input[name*=title]').val('');
    return false;
  }
  var content = $('#editForm-ta').val();
  content = $.trim(content);
  if (content.length === 0) {
    var warning = /*[[#{content.empty.warning}]]*/ "내용이 비었습니다!";
    alert(warning);
    $('#editForm-ta').val('');
    return false;
  }
  $('#editForm input[name*=title]').val(title);
  $('#edityForm-ta').val(content);
});
</pre>
</article>

<article id="thymeleaf-test">
<h2>게시판 구현을 위한 타임리프 테스트</h2>

<pre class="prettyprint">@GetMapping("/")
public String index(<strong>Model model</strong>) {
  <strong>int[] pages = {11,12,13,14,15,16,17,18,19,20};</strong>
  <strong>model.addAttribute("pages", pages);</strong>
  return "index";
}
</pre>

<pre class="prettyprint">&lt;h1&gt;게시판 구현을 위한 타임리프 테스트&lt;/h1&gt;
&lt;h2&gt;페이지 링크&lt;/h2&gt;

&lt;th:block th:each="page : ${pages}"&gt;
  &lt;span class="bbs-strong" th:if="${page} == ${param.page[0]}" th:text="${page}"&gt;11&lt;/span&gt;
  &lt;a href="#" th:unless="${page} == ${param.page[0]}" th:title="${page}" th:text="' [ ' + ${page} + ' ] '"&gt; [ 12 ] &lt;/a&gt;
&lt;/th:block&gt;
</pre>

<p>
<img src="../../../static/images/thymeleaf-test-page-links.png" th:src="@{/static/images/thymeleaf-test-page-links.png}" alt="페이지 링크 생성 테스트" />
</p>

<pre class="prettyprint">&lt;span class="bbs-strong"&gt;11&lt;/span&gt;
&lt;a href="#" title="12"&gt; [ 12 ] &lt;/a&gt;
&lt;a href="#" title="13"&gt; [ 13 ] &lt;/a&gt;
&lt;a href="#" title="14"&gt; [ 14 ] &lt;/a&gt;
&lt;a href="#" title="15"&gt; [ 15 ] &lt;/a&gt;
&lt;a href="#" title="16"&gt; [ 16 ] &lt;/a&gt;
&lt;a href="#" title="17"&gt; [ 17 ] &lt;/a&gt;
&lt;a href="#" title="18"&gt; [ 18 ] &lt;/a&gt;
&lt;a href="#" title="19"&gt; [ 19 ] &lt;/a&gt;
&lt;a href="#" title="20"&gt; [ 20 ] &lt;/a&gt;
</pre>

<h3>HiddenHttpMethodFilter 필터</h3>

<pre class="prettyprint">&lt;form <strong>method="post"</strong>&gt;
&lt;input type="hidden" <strong>name="_method" value="put"</strong> /&gt;
&lt;/form&gt;
</pre>

<pre class="prettyprint">&lt;form <strong>th:method="put"</strong>&gt;
&lt;/form&gt;
</pre>

<pre class="prettyprint">&lt;form <strong>method="post"</strong>&gt;
<strong>&lt;input type="hidden" name="_csrf" value="JaiETNDe...57E"/&gt;</strong>
<strong>&lt;input type="hidden" name="_method" value="put"/&gt;</strong>
&lt;/form&gt;
</pre>

<div class="filename">MvcWebApplicationInitializer.java</div>
<pre class="prettyprint">@Override
protected Filter[] getServletFilters() {
  return new Filter[] { new HiddenHttpMethodFilter() };
}
</pre>

<h3>한글 테스트</h3>

<div class="filename">toc.html</div>
<pre class="prettyprint">&lt;h3&gt;한글 테스트&lt;/h3&gt;
&lt;form id="testForm" th:action="@{/}" th:method="patch"&gt;
&lt;input type="hidden" name="page" th:value="${param.page}" /&gt;
&lt;input type="hidden" name="search" th:value="${param.search}" /&gt;
&lt;table id="write-form" class="bbs-table"&gt;
&lt;caption&gt;게시판 수정&lt;/caption&gt;
&lt;tr&gt;
  &lt;td&gt;게시판 코드&lt;/td&gt;
  &lt;td&gt;&lt;input type="text" name="boardCd" style="width: 90%" th:value="chat" /&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;게시판 영어 이름&lt;/td&gt;
  &lt;td&gt;&lt;input type="text" name="boardNm" style="width: 90%" th:value="Chat" /&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;게시판 한글 이름&lt;/td&gt;
  &lt;td&gt;&lt;input type="text" name="boardNm_ko" style="width: 90%" th:value="자유토론" /&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td colspan="2"&gt;
    &lt;input type="submit" value="전송" th:value="#{submit}" /&gt;
  &lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/form&gt;
</pre>

<pre class="prettyprint">.requestMatchers(HttpMethod.<strong>POST</strong>, "/").permitAll()</pre>

<pre style="border: 2px dotted grey;padding: 0.3em;">create table board (
  boardcd varchar2(20),
  boardnm varchar2(40) NOT NULL,
  boardnm_ko varchar2(40),
  constraint BOARD_PK PRIMARY KEY(boardcd)
);
-- for test records
insert into board values ('chat', 'Chat', '자유게시판');
commit;
</pre>

<div class="filename">Board.java</div>
<pre class="prettyprint">package net.java_school.board;

public class Board {
  private String boardCd;
  private String boardNm;
  private String boardNm_ko;

  public String getBoardCd() {
    return boardCd;
  }
  public void setBoardCd(String boardCd) {
    this.boardCd = boardCd;
  }
  public String getBoardNm() {
    return boardNm;
  }
  public void setBoardNm(String boardNm) {
    this.boardNm = boardNm;
  }
  public String getBoardNm_ko() {
    return boardNm_ko;
  }
  public void setBoardNm_ko(String boardNm_ko) {
    this.boardNm_ko = boardNm_ko;
  }
}
</pre>

<div class="filename">BoardMapper.java</div>
<pre class="prettyprint">package net.java_school.mapper;

import net.java_school.board.Board;

public interface BoardMapper {
  public void updateBoard(Board board);
}
</pre>

<div class="filename">BoardMapper.xml</div>
<pre class="prettyprint">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;

&lt;mapper namespace="net.java_school.mapper.BoardMapper"&gt;
  &lt;update id="updateBoard" parameterType="net.java_school.board.Board"&gt;
    UPDATE board SET boardnm = #{boardNm}, boardnm_ko = #{boardNm_ko}
    WHERE boardcd = #{boardCd}
  &lt;/update&gt;
&lt;/mapper&gt;
</pre>

<div class="filename">BoardServce.java</div>
<pre class="prettyprint">package net.java_school.board;

public interface BoardService {
  public void editBoard(Board board);
}
</pre>

<div class="filename">BoardServiceImpl.java</div>
<pre class="prettyprint">package net.java_school.board;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import net.java_school.mybatis.BoardMapper;

@Service
public class BoardServiceImpl implements BoardService {

  @Autowired
  private BoardMapper boardMapper;

  @Override
  public void editBoard(Board board) {
    boardMapper.updateBoard(board);
  }
}
</pre>

<div class="filename">HomeController.java</div>
<pre class="prettyprint">@PatchMapping("/")
public String editBoard(@RequestParam(name="page", defaultValue="1") Integer page, 
    @RequestParam(name="search", defaultValue="") String search, 
    @ModelAttribute(name="board") Board board) throws Exception {
  boardService.editBoard(board);
  search = URLEncoder.encode(search, "UTF-8");
  return "redirect:/?page=" + page + "&amp;search=" + search;
}
</pre>

<div class="filename">MvcWebConfig.java</div>
<pre class="prettyprint">@Configuration
@EnableWebMvc
@MapperScan("<strong>net.java_school.mapper</strong>")
@ComponentScan("net.java_school.controller,net.java_school.user,<strong>net.java_school.board</strong>")
public class MvcWebConfig implements WebMvcConfigurer {
 //...생략...
}
</pre>

<h3>thymeleaf-extras-springsecurity</h3>

<pre class="prettyprint">&lt;input type="button" value="수정" th:if="${#authentication.name eq username or #authorization.expression('hasRole(''ROLE_ADMIN'')')}" /&gt;</pre>

<pre class="prettyprint">@GetMapping("/")
public String index(Model model) {
  /*
  int[] pages = {11,12,13,14,15,16,17,18,19,20};
  model.addAttribute("pages", pages);
  */
  <strong>model.addAttribute("username","charles");</strong>//charles는 자신이 가입한 이름으로 수정
  return "index";
}
</pre>

<pre class="commandLine">insert into authorities values ('admin','ROLE_ADMIN');
commit;
</pre>
</article>

<article id="thymeleaf-coding">

<h2>타임리프 코딩</h2>

<h3>list.html</h3>

<h4>목록 페이지 title</h4>

<p>
<img src="../../../static/images/bbs-list-prototype-title.png" th:src="@{/static/images/bbs-list-prototype-title.png}" class="browser-output" alt="목록 페이지 title" />
</p>

<pre class="prettyprint">&lt;title <strong>th:text="${boardName}"</strong>&gt;자유게시판&lt;/title&gt;
</pre>

<h4>목록 테이블 위 게시판 이름</h4>

<p>
<img src="../../../static/images/bbs-list-prototype-board-name.png" th:src="@{/static/images/bbs-list-prototype-board-name.png}" class="browser-output" alt="목록 게시판" />
</p>

<pre class="prettyprint">&lt;div id="content-categories" <strong>th:text="${boardName}"</strong>&gt;자유게시판&lt;/div&gt;
</pre>

<h4>페이지당 게시글 수</h4>

<p>
<img src="../../../static/images/bbs-list-prototype-num-per-page.png" th:src="@{/static/images/bbs-list-prototype-num-per-page.png}" class="browser-output" alt="페이지당 레코드 수" />
</p>

<pre class="prettyprint">&lt;option value="" <strong>th:text="#{number.per.page}</strong>"&gt;페이지당 게시글 수&lt;/option&gt;
</pre>

<pre class="prettyprint">number.per.page = Number of posts per page</pre>
<pre class="prettyprint">number.per.page = 페이지당 게시글 수</pre>

<h4>목록 테이블</h4>

<p>
<img src="../../../static/images/bbs-list-prototype-list-table.png" th:src="@{/static/images/bbs-list-prototype-list-table.png}" class="browser-output" alt="목록 테이블" />
</p>

<pre class="prettyprint">&lt;table class="bbs-table" id="list-table"&gt;
&lt;tr&gt;
  &lt;th style="width: 60px;text-align: center;"&gt;NO&lt;/th&gt;
  &lt;th&gt;TITLE&lt;/th&gt;
  &lt;th style="width: 84px;text-align: center;"&gt;DATE&lt;/th&gt;
  &lt;th style="width: 60px;text-align: center;"&gt;HIT&lt;/th&gt;
&lt;/tr&gt;
&lt;tr <strong>th:each="post : ${posts}"</strong> <strong>th:class="${postStat.odd} ? 'odd'"</strong>&gt;
  &lt;td style="text-align: center;" th:text="<strong>${listItemNo} - ${post.postNo}</strong>"&gt;405&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" title="23488" <strong>th:title="${post.postNo}"</strong> th:text="<strong>${post.title}</strong>"&gt;자바 웹 프로그래밍 2 최종 소스&lt;/a&gt;&lt;/td&gt;
  &lt;td style="text-align: center;" <strong>th:with="df=#{date.format}"</strong> <strong>th:text="${#calendars.format(post.regdate,df)}"</strong>&gt;24 10 20&lt;/td&gt;
  &lt;td style="text-align: center;" th:text="<strong>${post.hit}</strong>"&gt;2&lt;/td&gt;
&lt;/tr&gt;
<strong>&lt;!--/*--&gt;</strong>
&lt;tr&gt;
  &lt;td style="text-align: center;"&gt;404&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" title="23486"&gt;우분투 24.04에 자바 개발 환경&lt;/a&gt;&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;24 07 15&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;1&lt;/td&gt;
&lt;/tr&gt;

&lt;!-- 생략 --&gt;

&lt;tr&gt;
  &lt;td style="text-align: center;"&gt;396&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" title="19212"&gt;스프링 MVC에서 Thymeleaf 레이아웃 사용&lt;/a&gt;&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;22 08 17&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;0&lt;/td&gt;
&lt;/tr&gt;
<strong>&lt;!--*/--&gt;</strong>
&lt;/table&gt;
</pre>

<pre class="prettyprint">&lt;form id="listForm" th:action="@{/bbs/{boardCd}(boardCd=${boardCd})}" method="get"&gt;
&lt;input type="hidden" name="page" /&gt;
&lt;input type="hidden" name="search" value="test" th:value="${param.search }" /&gt;
&lt;/form&gt;
</pre>

<h4>페이지 이동 링크</h4>

<p>
<img src="../../../static/images/bbs-list-prototype-paging.png" th:src="@{/static/images/bbs-list-prototype-paging.png}" class="browser-output" alt="페이지 링크" />
</p>

<pre class="prettyprint">&lt;div id="paging"&gt;
  &lt;a href="#" title="1" <strong>th:if="${prevPage} &amp;gt; 0"</strong> <strong>th:text="'[' + #{first.page} + ']'"</strong>&gt;[처음]&lt;/a&gt;
  &lt;a href="#" title="10" <strong>th:if="${prevPage} &amp;gt; 0"</strong> <strong>th:title="${prevPage}"</strong> <strong>th:text="'[' + #{prev.page} + ']'"</strong>&gt;[이전]&lt;/a&gt;
  <strong>&lt;th:block</strong> <strong>th:each="page : ${pages}"</strong>&gt;
    &lt;span class="bbs-strong" <strong>th:if="${page} == ${param.page[0]}"</strong> <strong>th:text="${page}"</strong>&gt;11&lt;/span&gt;
    &lt;a href="#" title="12" <strong>th:unless="${page} == ${param.page[0]}"</strong> <strong>th:title="${page}"</strong> <strong>th:text="' [ ' + ${page} + ' ] '"</strong>&gt; [ 12 ] &lt;/a&gt;
  <strong>&lt;/th:block&gt;</strong>
  <strong>&lt;!--/*--&gt;</strong>
  &lt;a href="#" title="13"&gt;[ 13 ]&lt;/a&gt;
  &lt;a href="#" title="14"&gt;[ 14 ]&lt;/a&gt;
  &lt;a href="#" title="15"&gt;[ 15 ]&lt;/a&gt;
  &lt;a href="#" title="16"&gt;[ 16 ]&lt;/a&gt;
  &lt;a href="#" title="17"&gt;[ 17 ]&lt;/a&gt;
  &lt;a href="#" title="18"&gt;[ 18 ]&lt;/a&gt;
  &lt;a href="#" title="19"&gt;[ 19 ]&lt;/a&gt;
  &lt;a href="#" title="20"&gt;[ 20 ]&lt;/a&gt;
  <strong>&lt;!--*/--&gt;</strong>
  &lt;a href="#" title="21" th:if="<strong>${nextPage} &amp;gt; 0"</strong> <strong>th:title="${nextPage}"</strong> <strong>th:text="'[' + #{next.page} + ']'"</strong>&gt;[다음]&lt;/a&gt;
  &lt;a href="#" title="41" th:if="<strong>${nextage} &amp;gt; 0"</strong> <strong>th:title="${finalPage}"</strong> <strong>th:text="'[' + #{final.page} + ']'"</strong>&gt;[마지막]&lt;/a&gt;
&lt;/div&gt;
</pre>

<pre class="prettyprint">&lt;style&gt;
article {
  width: 777px;
  margin: 0 auto;
}
<strong>#paging a {</strong>
  <strong>color: #555;</strong>
  <strong>text-decoration: none;</strong>
<strong>}</strong>
<strong>#paging a:hover {</strong>
  <strong>color: #555;</strong>
  <strong>text-decoration: underline;</strong>
<strong>}</strong>
&lt;/style&gt;
</pre>

<pre class="prettyprint">first.page = First
prev.page = Prev
next.page = Next
final.page = Final
</pre>

<pre class="prettyprint">first.page = 처음
prev.page = 이전
next.page = 다음
final.page = 마지막
</pre>

<pre class="prettyprint">&lt;form id="listForm" <strong>th:action="@{/bbs/{boardCd}(boardCd=${boardCd})}"</strong> method="get"&gt;
&lt;input type="hidden" name="page" /&gt;
&lt;input type="hidden" name="search" value="test" <strong>th:value="${param.search }"</strong> /&gt;
&lt;/form&gt;
</pre>

<h4>새 글쓰기 버튼</h4>

<p>
<img src="../../../static/images/bbs-list-prototype-new-post-btn.png" th:src="@{/static/images/bbs-list-prototype-new-post-btn.png}" class="browser-output" alt="새 글쓰기 버튼" />
</p>

<pre class="prettyprint">&lt;input type="button" value="새 글쓰기" <strong>th:value="#{write.new.post}"</strong> id="new-post-btn" /&gt;
</pre>

<pre class="prettyprint">write.new.post = New</pre>

<pre class="prettyprint">write.new.post = 새 글쓰기</pre>

<h4>새 글쓰기</h4>

<p>
<img src="../../../static/images/bbs-list-prototype-new-form.png" th:src="@{/static/images/bbs-list-prototype-new-form.png}" class="browser-output" alt="새 글쓰기 폼" />
</p>

<pre class="prettyprint">&lt;form id="writeForm" action="/bbs/chat" <strong>th:action="@{/bbs/{boardCd}(boardCd=${boardCd})}"</strong> method="post" style="display: none;"&gt;
&lt;table id="write-form" class="bbs-table"&gt;
&lt;caption <strong>th:text="#{write.new.post}"</strong>&gt;새 글쓰기&lt;/caption&gt;
&lt;tr&gt;
  &lt;td <strong>th:text="#{post.title}"</strong>&gt;제목&lt;/td&gt;
  &lt;td&gt;
    &lt;input type="text" name="title" style="width: 90%" /&gt;
  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td colspan="2"&gt;
    &lt;textarea id="writeForm-ta" name="content" rows="10" cols="50"&gt;&lt;/textarea&gt;
  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td colspan="2"&gt;
    &lt;input type="submit" value="전송" <strong>th:value="#{submit}"</strong> /&gt;
  &lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/form&gt;
</pre>

<pre class="prettyprint">post.title = Title
</pre>

<pre class="prettyprint">post.title = 제목
</pre>

<h4>검색</h4>

<p>
<img src="../../../static/images/bbs-list-prototype-search-form.png" th:src="@{/static/images/bbs-list-prototype-search-form.png}" class="browser-output" alt="검색 폼" />
</p>

<pre class="prettyprint">&lt;form id="searchForm" action="/bbs/chat" th:action="<strong>@{/bbs/{boardCd}(boardCd=${boardCd})}</strong>" method="get"&gt;
  &lt;input type="hidden" name="page" value="1" /&gt;
  &lt;div style="text-align: center;"&gt;
    &lt;input type="text" name="search" size="15" maxlength="30" /&gt;
    &lt;input type="submit" value="검색" <strong>th:value="#{search}"</strong> /&gt;
  &lt;/div&gt;
&lt;/form&gt;
</pre>

<pre class="prettyprint">search = Search
</pre>

<pre class="prettyprint">search = 검색
</pre>

<pre class="prettyprint">&lt;form id="listForm" <strong>th:action="@{/bbs/{boardCd}(boardCd=${boardCd})}"</strong> method="get"&gt;
&lt;input type="hidden" name="page" /&gt;
&lt;input type="hidden" name="search" value="test" <strong>th:value="${param.search }"</strong> /&gt;
&lt;/form&gt;
&lt;form id="viewForm" action="/bbs/chat/" <strong>th:action="@{/bbs/{boardCd}/(boardCd=${boardCd})}"</strong> method="get"&gt;
&lt;input type="hidden" name="page" value="1" <strong>th:value="${param.page }"</strong> /&gt;
&lt;input type="hidden" name="search" value="test" <strong>th:value="${param.search }"</strong> /&gt;
&lt;/form&gt;
</pre>

<h3>view.html</h3>

<h4>게시판 이름과 수정, 삭제, 다음 글, 이전 글, 목록 버튼</h4>

<p>
<img src="../../../static/images/bbs-view-prototype-boardname-viewmenu.png" th:src="@{/static/images/bbs-view-prototype-boardname-viewmenu.png}" class="browser-output" alt="게시판 이름과 내용보기 화면 메뉴" />
</p>

<pre class="prettyprint">&lt;div id="content-categories" <strong>th:text="${boardName}"</strong>&gt;자유게시판&lt;/div&gt;
&lt;div style="height: 22px;"&gt;
  &lt;div style="float: left;"&gt;
    &lt;input type="button" value="수정" <strong>th:if="${#authentication.name eq one.username or #authorization.expression('hasRole(''ROLE_ADMIN'')')}"</strong> <strong>th:value="#{edit.post}"</strong> id="edit-post-btn" /&gt;
    &lt;input type="button" value="삭제" <strong>th:if="${#authentication.name eq one.username or #authorization.expression('hasRole(''ROLE_ADMIN'')')}"</strong> <strong>th:value="#{del.post}"</strong> id="del-post-btn" /&gt;
  &lt;/div&gt;
  &lt;div style="float: right;"&gt;
    &lt;input type="button" value="다음 글" <strong>th:if="${nextPostNo} &gt; 0"</strong> <strong>th:value="#{next.post}"</strong> title="23489" <strong>th:title="${nextPostNo}"</strong> id="next-post-btn" /&gt;
    &lt;input type="button" value="이전 글" <strong>th:if="${prevPostNo} &gt; 0"</strong> <strong>th:value="#{prev.post}"</strong> title="13087" <strong>th:title="${prevPostNo}"</strong> id="prev-post-btn" /&gt;
    &lt;input type="button" value="목록" <strong>th:value="#{list}"</strong> id="list-btn" /&gt;
  &lt;/div&gt;
&lt;/div&gt;
</pre>

<pre class="prettyprint">edit.post = Edit
del.post = Del
next.post = Next Post
prev.post = Prev Post
list = List
</pre>

<pre class="prettyprint">edit.post = 수정
del.post = 삭제
next.post = 다음 글
prev.post = 이전 글
list = 목록
</pre>

<h4>게시글 상세 내용</h4>

<p>
<img src="../../../static/images/bbs-view-prototype-detail.png" th:src="@{/static/images/bbs-view-prototype-detail.png}" class="browser-output" alt="게시글 제목,내용,날짜,소유자" />
</p>

<pre class="prettyprint">&lt;div id="detail"&gt;
&lt;table class="bbs-table"&gt;
&lt;tr&gt;
  &lt;th style="width: 50px;text-align: left;vertical-align: top;font-size: 15px;"&gt;TITLE&lt;/th&gt;
  &lt;th style="text-align: left;color: #555;font-size: 15px;" id="post-title" <strong>th:text="${one.title}"</strong>&gt;자바 웹 프로그래밍 2 최종 소스&lt;/th&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;div id="date-writer-hit" <strong>th:with="df=#{detail.date.format}"</strong> <strong>th:text="'edited ' + ${#calendars.format(one.regdate,df)} + ' by ' + ${one.username} + ', hit ' + ${one.hit}"</strong>&gt;edited 24 07 15 오후 8:18:39 by hoon, hit 4&lt;/div&gt;
&lt;div id="post-content" <strong>th:text="${one.content}"</strong>&gt;
자바 웹 프로그래밍 2 예제&lt;br /&gt;
https://github.com/kimjonghoon/java-web-programming-2-samples
  &lt;/div&gt;
&lt;/div&gt;
</pre>

<pre class="prettyprint">detail.date.format = MMM d, yyyy HH:mm:ss aaa</pre>

<pre class="prettyprint">detail.date.format = yyyy.MM.dd HH:mm:ss aaa</pre>

<h4>수정 폼</h4>

<p>
<img src="../../../static/images/bbs-view-prototype-edit-form.png" th:src="@{/static/images/bbs-view-prototype-edit-form.png}" class="browser-output" alt="수정 양식" />
</p>

<pre class="prettyprint">&lt;form id="editForm" <strong>th:action="@{/bbs/{boardCd}/{postNo}(boardCd=${boardCd},postNo=${one.postNo})}"</strong> <strong>th:method="put"</strong> style="display: none;"&gt;
&lt;input type="hidden" name="page" value="1" <strong>th:value="${param.page}"</strong> /&gt;
&lt;input type="hidden" name="search" value="" <strong>th:value="${param.search}"</strong> /&gt;
&lt;table id="write-form" class="bbs-table"&gt;
&lt;caption <strong>th:text="#{edit.post}"</strong>&gt;수정&lt;/caption&gt;
&lt;tr&gt;
  &lt;td <strong>th:text="#{post.title}"</strong>&gt;제목&lt;/td&gt;
  &lt;td&gt;&lt;input name="title" type="text" id="editForm-input" value="웹 프로그래밍 2 최종 소스" <strong>th:value="${one.title}"</strong> style="width: 90%" /&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td colspan="2"&gt;
&lt;textarea id="editForm-ta" name="content" rows="10" style="width: 100%" <strong>th:text="${one.content}"</strong>&gt;
자바 웹 프로그래밍 2 예제&lt;br /&gt;
https://github.com/kimjonghoon/java-web-programming-2-samples
&lt;/textarea&gt;
  &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td colspan="2"&gt;&lt;input type="submit" value="전송" <strong>th:value="#{submit}"</strong> /&gt;&lt;/td&gt;
&lt;/table&gt;
&lt;/form&gt;
</pre>

<h4>목록 테이블</h4>

<p>
<img src="../../../static/images/bbs-view-prototype-list-table.png" th:src="@{/static/images/bbs-view-prototype-list-table.png}" class="browser-output" alt="목록 테이블" />
</p>

<pre class="prettyprint">&lt;table class="bbs-table" id="list-table"&gt;
&lt;tr&gt;
  &lt;th style="width: 60px;text-align: center;"&gt;NO&lt;/th&gt;
  &lt;th&gt;TITLE&lt;/th&gt;
  &lt;th style="width: 84px;text-align: center;"&gt;DATE&lt;/th&gt;
  &lt;th style="width: 60px;text-align: center;"&gt;HIT&lt;/th&gt;
&lt;/tr&gt;
&lt;tr <strong>th:each="post : ${posts}"</strong> <strong>th:class="${postStat.odd} ? 'odd'"</strong>&gt;
  &lt;td style="text-align: center;" <strong>th:utext="${one.postNo} == ${post.postNo} ? '&lt;b&gt;&gt;&lt;/b&gt;' : ${listItemNo} - ${postStat.index}"</strong>&gt;405&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" title="23488" <strong>th:title="${post.postNo}"</strong> <strong>th:text="${post.title}"</strong>&gt;자바 웹 프로그래밍 2 최종 소스&lt;/a&gt;&lt;/td&gt;
  &lt;td style="text-align: center;" <strong>th:with="df=#{date.format}"</strong> <strong>th:text="${#calendars.format(post.regdate,df)}"</strong>&gt;24 10 20&lt;/td&gt;
  &lt;td style="text-align: center;" <strong>th:text="${post.hit}"</strong>&gt;2&lt;/td&gt;
&lt;/tr&gt;
<strong>&lt;!--/*--&gt;</strong>
&lt;tr&gt;
  &lt;td style="text-align: center;"&gt;404&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" title="23486"&gt;우분투 24.04에 자바 개발 환경&lt;/a&gt;&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;24 07 15&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;1&lt;/td&gt;
&lt;/tr&gt;

&lt;!-- 생략--&gt;

&lt;tr&gt;
  &lt;td style="text-align: center;"&gt;396&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" title="19212"&gt;스프링 MVC에서 Thymeleaf 레이아웃 사용&lt;/a&gt;&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;22 08 17&lt;/td&gt;
  &lt;td style="text-align: center;"&gt;0&lt;/td&gt;
&lt;/tr&gt;
<strong>&lt;!--*/--&gt;</strong>
&lt;/table&gt;
</pre>

<p>
th:utext="${one.postNo} == ${post.postNo} ? '&lt;b&gt;&gt;&lt;/b&gt;' : ${listItemNo} - ${postStat.index}"에서
&gt; 대신 프로토타입처럼 이미지를 보이려면,
'&lt;b&gt;&gt;&lt;/b&gt;'을 '&lt;b class=selected-item&gt;&amp;nbsp;&amp;nbsp;&lt;/b&gt;'로 변경하고,
screen.css와 print.css 파일에 다음을 추가한다.<br />
</p>

<pre class="prettyprint">.selected-item {
  background: #FFF url('../images/arrow.gif') no-repeat 50% 50%;
}
</pre>

<p>
<img src="../../../static/images/arrow.gif" th:src="@{/static/images/arrow.gif}" alt="selected item image" /> 이미지는 프로토타입에서 사용했다.
</p>

<h4>페이지 링크</h4>

<p>
<img src="../../../static/images/bbs-view-prototype-page-links.png" th:src="@{/static/images/bbs-view-prototype-page-links.png}" class="browser-output" alt="페이지 링크" />
</p>

<pre class="prettyprint">&lt;div id="paging"&gt;
  &lt;a href="#" title="1" <strong>th:if="${prevPage} &gt; 0"</strong> <strong>th:text="'[' + #{first.page} + ']'"</strong>&gt;[처음]&lt;/a&gt;
  &lt;a href="#" title="10" <strong>th:if="${prevPage} &gt; 0"</strong> <strong>th:title="${prevPage}" th:text="'[' + #{prev.page} + ']'"</strong>&gt;[이전]&lt;/a&gt;
  <strong>&lt;th:block th:each="page : ${pages}"&gt;</strong>
    <strong>&lt;span class="bbs-strong" th:if="${page} == ${param.page[0]}" th:text="${page}"&gt;11&lt;/span&gt;</strong>
    <strong>&lt;a href="#" title="12" th:unless="${page} == ${param.page[0]}" th:title="${page}" th:text="' [ ' + ${page} + ' ] '"&gt;[ 12 ]&lt;/a&gt;</strong>
  <strong>&lt;/th:block&gt;</strong>
  <strong>&lt;!--/*--&gt;</strong>
  &lt;a href="#" title="13"&gt;[ 13 ]&lt;/a&gt;
  &lt;a href="#" title="14"&gt;[ 14 ]&lt;/a&gt;
  &lt;a href="#" title="15"&gt;[ 15 ]&lt;/a&gt;
  &lt;a href="#" title="16"&gt;[ 16 ]&lt;/a&gt;
  &lt;a href="#" title="17"&gt;[ 17 ]&lt;/a&gt;
  &lt;a href="#" title="18"&gt;[ 18 ]&lt;/a&gt;
  &lt;a href="#" title="19"&gt;[ 19 ]&lt;/a&gt;
  &lt;a href="#" title="20"&gt;[ 20 ]&lt;/a&gt;
  <strong>&lt;!--*/--&gt;</strong>
  &lt;a href="#" title="21" <strong>th:if="${nextPage} &gt; 0"</strong> <strong>th:title="${nextPage}" th:text="'[' + #{next.page} + ']'"</strong>&gt;[다음]&lt;/a&gt;
  &lt;a href="#" title="41" <strong>th:if="${nextPage} &gt; 0"</strong> <strong>th:title="${finalPage}" th:text="'[' + #{final.page} + ']'"</strong>&gt;[마지막]&lt;/a&gt;
&lt;/div&gt;
</pre>

<h4>검색</h4>

<p>
<img src="../../../static/images/bbs-view-prototype-search.png" th:src="@{/static/images/bbs-view-prototype-search.png}" class="browser-output" alt="검색" />
</p>

<pre class="prettyprint">&lt;form id="searchForm" action="/bbs/chat" method="get"
    <strong>th:action="@{/bbs/{boardCd}(boardCd=${boardCd})}"</strong>&gt;
  &lt;input type="hidden" name="page" value="1" /&gt;
  &lt;div style="text-align: center;"&gt;
    &lt;input type="text" name="search" size="15" maxlength="30" /&gt;
    &lt;input type="submit" value="검색" <strong>th:value="#{search}"</strong> /&gt;
  &lt;/div&gt;
&lt;/form&gt;
</pre>

<h4>목록, 내용보기, 삭제 폼</h4>

<pre class="prettyprint">&lt;div id="form-group" style="display: none"&gt;
  &lt;form id="listForm" action="/bbs/chat" method="get"
      <strong>th:action="@{/bbs/{boardCd}(boardCd=${boardCd})}"</strong>&gt;
    &lt;input type="hidden" name="page" value="11" <strong>th:value="${param.page}"</strong> /&gt;
    &lt;input type="hidden" name="search" value="test" <strong>th:value="${param.search }"</strong> /&gt;
  &lt;/form&gt;
  &lt;form id="viewForm" action="/bbs/chat/" method="get"
      <strong>th:action="@{/bbs/{boardCd}/(boardCd=${boardCd})}"</strong>&gt;
    &lt;input type="hidden" name="page" value="11" <strong>th:value="${param.page}"</strong> /&gt;
    &lt;input type="hidden" name="search" value="test" <strong>th:value="${param.search}"</strong> /&gt;
  &lt;/form&gt;
  &lt;form id="delForm" action="/bbs/chat/52"
      <strong>th:action="@{/bbs/{boardCd}/{postNo}(boardCd=${boardCd},postNo=${one.postNo})}"</strong> 
      <strong>th:method="delete"</strong>&gt;
    &lt;input type="hidden" name="page" value="11" <strong>th:value="${param.page}"</strong> /&gt;
    &lt;input type="hidden" name="search" value="test" <strong>th:value="${param.search}"</strong> /&gt;
  &lt;/form&gt;
&lt;/div&gt;
</pre>

<div class="filename">/bbs/menu.html</div>
<pre class="prettyprint">&lt;html xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
&lt;link rel="stylesheet" media="all" href="../../../static/css/screen.css" /&gt;
&lt;style&gt;
#sidebar {
  margin-left: 0;
}
&lt;/style&gt;
&lt;body&gt;
&lt;th:block th:fragment="index" id="sidebar"&gt;
&lt;h1&gt;BBS&lt;/h1&gt;
&lt;ul&gt;
  &lt;li th:each="board : ${boards}"&gt;&lt;a href="#" th:href="@{/bbs/{boardCd}(boardCd=${board.boardCd},page='1')}" th:text="${#locale.language == 'ko'} ? ${board.boardNm_ko} : ${board.boardNm}"&gt;공지 사항&lt;/a&gt;&lt;/li&gt;
  &lt;!--/*--&gt;
  &lt;li&gt;&lt;a href="#"&gt;영화&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="#"&gt;음악&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="#"&gt;자유 토론&lt;/a&gt;&lt;/li&gt;
  &lt;!--*/--&gt;
&lt;/ul&gt;
&lt;/th:block&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

<p>
<img src="../../../static/images/bbs-menu.png" th:src="@{/static/images/bbs-menu.png}" alt="게시판 메뉴 화면" />
</p>

<div class="filename">/bbs/refs.html</div>
<pre class="prettyprint">&lt;html xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
&lt;link rel="stylesheet" media="all" href="../../../static/css/screen.css" /&gt;
&lt;style&gt;
#extra {
  margin-left: 0;
}
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div id="extra" th:fragment="references"&gt;
&lt;ul&gt;
  &lt;li class="sub-heading" th:text="${#locale.language == 'ko'} ? _ : 'References'"&gt;참고자료&lt;/li&gt;
  &lt;li&gt;&lt;a href="#" th:href="@{http://java-school.net/jsp/BBS-Study}" th:text="${#locale.language == 'ko'} ? _ : 'Basic Concepts of BBS'"&gt;게시판 기본 개념&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="#" th:href="@{http://java-school.net/blog/2017/basic-board}" th:text="${#locale.language == 'ko'} ? _ : 'Basic Board'"&gt;기본 게시판&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="#" th:href="@{http://java-school.net/blog/2017/model2-board}" th:text="${#locale.language == 'ko'} ? _ : 'Model 2 Board'"&gt;모델 2 게시판&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="#" th:href="@{http://java-school.net/blog/2017/model2-board-using-DBCP}" th:text="${#locale.language == 'ko'} ? _ : 'Oracle Model 2 Board using DBCP'"&gt;DBCP를 사용하는 오라클 모델 2 게시판&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="#" th:href="@{http://java-school.net/blog/2017/board-using-oracle-hierarchical-query}" th:text="${#locale.language == 'ko'} ? _ : 'Board using Oracle hierarchical query'"&gt;오라클 계층형 쿼리를 사용하는 게시판&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

<p>
<img src="../../../static/images/bbs-refs.png" th:src="@{/static/images/bbs-refs.png}" alt="게시판 참고자료 화면" />
</p>

<p>
<img src="../../../images/bbs-refs_en.png" th:src="@{/static/images/bbs-refs_en.png}" alt="게시판 참고자료 영어 화면" />
</p>

<pre class="prettyprint">&lt;li&gt;&lt;a th:href="@{/bbs/chat(page='1')}"&gt;BBS&lt;/a&gt;&lt;/li&gt;</pre>

<div class="filename">cookie.js</div>
<pre class="prettyprint">function createCookie(name, value, days) {
  var newCookie = name + "=" + escape(value);
  if (days) {
    var expires = new Date();
    expires.setTime(expires.getTime() + days * 24 * 60 * 60 * 1000);
    newCookie += "; expires=" + expires.toGMTString();
  }
  document.cookie = newCookie;
}
</pre>
</article>

<article id="database-design">
<h2>데이터베이스 설계</h2>

<pre style="border: 2px dotted grey;padding: 0.3em;">create table board (
  boardcd varchar2(20),
  boardnm varchar2(40) NOT NULL,
  boardnm_ko varchar2(40),
  constraint BOARD_PK PRIMARY KEY(boardcd)
);
</pre>

<pre style="border: 2px dotted grey;padding: 0.3em;">create table post (
  postno number,
  boardcd varchar2(20),
  title varchar2(200) NOT NULL,
  content varchar2(4000) NOT NULL,
  username varchar2(60),
  hit number,
  regdate date,
  constraint POST_PK PRIMARY KEY(postno),
  constraint POST_Fi FOREIGN KEY(boardcd) REFERENCES board(boardcd)
);
create sequence POST_SEQ
  increment by 1
  start with 1;
</pre>

</article>

<article id="beans-design">

<h2>빈 설계</h2>

<div class="filename">Board.java</div>
<pre class="prettyprint">package net.java_school.board;

public class Board {
  private String boardCd;
  private String boardNm;
  private String boardNm_ko;

  public String getBoardCd() {
    return boardCd;
  }
  public void setBoardCd(String boardCd) {
    this.boardCd = boardCd;
  }
  public String getBoardNm() {
    return boardNm;
  }
  public void setBoardNm(String boardNm) {
    this.boardNm = boardNm;
  }
  public String getBoardNm_ko() {
    return boardNm_ko;
  }
  public void setBoardNm_ko(String boardNm_ko) {
    this.boardNm_ko = boardNm_ko;
  }
}
</pre>

<div class="filename">Post.java</div>
<pre class="prettyprint">package net.java_school.board;

import java.util.Date;

public class Post {
  private Integer postNo;
  private String boardCd;
  private String title;
  private String content;
  private String username;
  private int hit;
  private Date regdate;

  public Integer getPostNo() {
    return postNo;
  }
  public void setPostNo(Integer postNo) {
    this.postNo = postNo;
  }
  public String getBoardCd() {
    return boardCd;
  }
  public void setBoardCd(String boardCd) {
    this.boardCd = boardCd;
  }
  public String getTitle() {
    return title;
  }
  public void setTitle(String title) {
    this.title = title.trim();
  }
  public String getContent() {
    return content;
  }
  public void setContent(String content) {
    this.content = content.trim();
  }
  public String getUsername() {
    return username;
  }
  public void setUsername(String username) {
    this.username = username;
  }
  public int getHit() {
    return hit;
  }
  public void setHit(int hit) {
    this.hit = hit;
  }
  public Date getRegdate() {
    return regdate;
  }
  public void setRegdate(Date regdate) {
    this.regdate = regdate;
  }
}
</pre>
</article>

<article id="implement">

<h2>구현</h2>

<h3>목록보기</h3>

<div class="filename">BoardMapper.xml</div>
<pre class="prettyprint">&lt;select <strong>id="selectAllBoards"</strong> parameterType="string" resultType="net.java_school.board.Board"&gt;
  SELECT * FROM board
  &lt;if test="search != null and search != ''"&gt;
  WHERE boardCd LIKE '%' || #{search} || '%' OR boardNm LIKE '%' || #{search} || '%' OR boardNm_ko LIKE '%' || #{search} || '%'
  &lt;/if&gt;
  order by boardcd
&lt;/select&gt;
&lt;select <strong>id="selectOneBoard"</strong> parameterType="string" resultType="net.java_school.board.Board"&gt;
  SELECT * FROM board WHERE boardcd = #{boardCd}
&lt;/select&gt;
&lt;select <strong>id="selectCountOfPosts"</strong> parameterType="hashmap" resultType="int"&gt;
  SELECT count(*) FROM post 
  WHERE boardcd = #{boardCd}
    &lt;if test="search != null and search != ''"&gt;
    AND (title LIKE '%${search}%' OR content LIKE '%${search}%')
    &lt;/if&gt;
&lt;/select&gt;
&lt;select <strong>id="selectListOfPosts"</strong> parameterType="hashmap" resultType="net.java_school.board.Post"&gt;
  SELECT postno, title, regdate, hit
    FROM (
      SELECT rownum R,A.* 
      FROM (
        SELECT postno, title, regdate, hit
        FROM 
          post
        WHERE
          boardcd = #{boardCd}
          &lt;if test="search != null and search != ''"&gt;
          AND (title LIKE '%${search}%' OR content LIKE '%${search}%')
          &lt;/if&gt;
        ORDER BY postno DESC
      ) A
    )
  WHERE R BETWEEN #{start} AND #{end}
&lt;/select&gt;
</pre>

<pre class="prettyprint">insert into post values (post_seq.nextval,'chat','test','test test','michael',0,sysdate);
</pre>

<pre class="prettyprint">SELECT postno, title, regdate, hit
FROM (
  SELECT rownum R,A.* 
    FROM (
      SELECT postno, title, regdate, hit 
      FROM post
      WHERE boardcd = 'chat'
        AND (title LIKE '%test%' OR content LIKE '%test%')
      ORDER BY postno DESC
    ) A
)
WHERE R BETWEEN 1 AND 10;
</pre>

<div class="filename">BoardMapper.java</div>
<pre class="prettyprint">public List&lt;Board&gt; selectAllBoards(@Param("search") String search);
public Board selectOneBoard(@Param("boardCd") String boardCd);
public int selectCountOfPosts(HashMap&lt;String, String&gt; hashmap);
public List&lt;Post&gt; selectListOfPosts(HashMap&lt;String, String&gt; hashmap);
</pre>

<p>
다음 임포트 문이 필요하다.<br />
import java.util.HashMap;<br />
import java.util.List;<br />
import net.java_school.board.Post;<br />
import net.java_school.board.Board;<br />
import org.apache.ibatis.annotations.Param;<br />
</p>

<div class="filename">BoardService.java</div>
<pre class="prettyprint">@PreAuthorize("hasAnyRole('ADMIN','USER')")
public List&lt;Board&gt; getBoards(String search);
@PreAuthorize("hasAnyRole('ADMIN','USER')")
public Board getBoard(String boardCd);
public int getTotalRecord(String boardCd, String search);
@PreAuthorize("hasAnyRole('ADMIN','USER')")
public List&lt;Post&gt; getPostList(String boardCd, String search, int start, int end);
</pre>

<p>
다음 임포트 문이 필요하다.<br />
import java.util.List;<br />
import org.springframework.security.access.prepost.PreAuthorize;<br />
@PreAuthorize("hasAnyRole('ADMIN','USER')") 애너테이션은, 
ROLE_USER 이나 ROLE_ADMIN 권한을 가진 사용자만이 이 메소드를 실행할 수 있게 한다.<br />
</p>

<div class="filename">BoardServiceImpl.java</div>
<pre class="prettyprint">@Override
public List&lt;Board&gt; getBoards(String search) {
  return boardMapper.selectAllBoards(search);
}
@Override
public Board getBoard(String boardCd) {
  return boardMapper.selectOneBoard(boardCd);
}
@Override
public int getTotalRecord(String boardCd, String searchWord) {
  HashMap&lt;String, String&gt; hashmap = new HashMap&lt;&gt;();
  hashmap.put("boardCd", boardCd);
  hashmap.put("search", search);
  return boardMapper.selectCountOfPosts(hashmap);
}
@Override
public List&lt;Post&gt; getPostList(String boardCd, String search, Integer start, Integer end) {
  HashMap&lt;String, String&gt; hashmap = new HashMap&lt;&gt;();
  hashmap.put("boardCd", boardCd);
  hashmap.put("search", search);
  hashmap.put("start", start.toString());
  hashmap.put("end", end.toString());
  return boardMapper.selectListOfPosts(hashmap);
}
</pre>

<p>
다음 임포트 문이 필요하다.<br />
import java.util.HashMap;<br />
import java.util.List;<br />
</p>

<div class="filename">NumbersForPaging.java</div>
<pre class="prettyprint">package net.java_school.commons;

public class NumbersForPaging {
  private int prevPage;//[이전]
  private int[] pages;//페이지 이동 링크 배열
  private int nextPage;//[다음]
  private int finalPage;//[마지막]
  private int listItemNo;//목록 테이블 아이템 번호

  public int getPrevPage() {
    return prevPage;
  }
  public void setPrevPage(int prevPage) {
    this.prevPage = prevPage;
  }
  public int[] getPages() {
    return pages;
  }
  public void setPages(int[] pages) {
    this.pages = pages;
  }
  public int getNextPage() {
    return nextPage;
  }
  public void setNextPage(int nextPage) {
    this.nextPage = nextPage;
  }
  public int getFinalPage() {
    return finalPage;
  }
  public void setFinalPage(int finalPage) {
    this.finalPage = finalPage;
  }
  public int getListItemNo() {
    return listItemNo;
  }
  public void setListItemNo(int listItemNo) {
    this.listItemNo = listItemNo;
  }
}
</pre>

<div class="filename">Paginator.java</div>
<pre class="prettyprint">package net.java_school.commons;

public class Paginator {

  public NumbersForPaging getNumbersForPaging(int totalRecord, int page, int numberPerPage, int pagePerBlock) {
    int totalPage = totalRecord / numberPerPage;
    if (totalRecord % numberPerPage != 0) {
      totalPage++;
    }
    int totalBlock = totalPage / pagePerBlock;
    if (totalPage % pagePerBlock != 0) {
      totalBlock++;
    }
    int block = page / pagePerBlock;
    if (page % pagePerBlock != 0) {
      block++;
    }
    int firstPage = (block - 1) * pagePerBlock + 1;
    int lastPage = block * pagePerBlock;
    if (block &gt;= totalBlock) {
      lastPage = totalPage;
    }
	int length = lastPage - firstPage + 1;
    int[] pages = new int[length];
    for (int i = 0, j = firstPage; i &lt;= length; i++, j++) {
	  pages[i] = j;
	  if (j == lastPage) break;
    }
    int prevPage = 0;
    if (block &gt; 1) {
      prevPage = firstPage - 1;
    }
    int nextPage = 0;
    if (block &lt; totalBlock) {
      nextPage = lastPage + 1;
    }
    int listItemNo = totalRecord - (page - 1) * numberPerPage;
    NumbersForPaging numbers = new NumbersForPaging();
    numbers.setPrevPage(prevPage);
    numbers.setPages(pages);
    numbers.setNextPage(nextPage);
    numbers.setFinalPage(totalPage);
    numbers.setListItemNo(listItemNo);
    return numbers;
  }
}
</pre>

<div class="filename">BbsController.java</div>
<pre class="prettyprint">package net.java_school.controller;

@Controller
@RequestMapping("bbs")
public class BbsController <strong>extends Paginator</strong> {
	
  @Autowired
  private BoardService boardService;

  private String getBoardName(String boardCd, String lang) {
    Board board = boardService.getBoard(boardCd);

    switch (lang) {
      case "en":
        return board.getBoardNm();
      case "ko":
        return board.getBoardNm_ko();
      default:
        return board.getBoardNm();
    }
  }

  @GetMapping("{boardCd}")
  public String list(
      @CookieValue(name="numberPerPage", defaultValue="10") Integer numberPerPage,
      @PathVariable(name="boardCd") String boardCd,
      @RequestParam(name="page", defaultValue="1") Integer page,
      @RequestParam(name="search", defaultValue="") String search,
      Locale locale, Model model) {
    //서브 메뉴의 게시판 링크
    List&lt;Board&gt; boards = boardService.getBoards();
    String lang = locale.getLanguage();//게시판 이름
    String boardName = this.getBoardName(boardCd, lang);
    int totalRecord = boardService.getTotalRecord(boardCd, search);//총 레코드 수
    int pagePerBlock = 10;
    NumbersForPaging numbers = this.getNumbersForPaging(totalRecord, page, numberPerPage, pagePerBlock);
    //목록 테이블을 채울 List&lt;Post&gt;  
    int start = (page - 1) * numberPerPage + 1;
    int end = page * numberPerPage;
    List&lt;Post&gt; posts = boardService.getPostList(boardCd, search, start, end);
    //산출한 데이터를 뷰에 전달
    model.addAttribute("boards", boards);
    model.addAttribute("boardName", boardName);
    model.addAttribute("posts", posts);
    model.addAttribute("prevPage", numbers.getPrevPage());
    model.addAttribute("pages", numbers.getPages());
    model.addAttribute("nextPage", numbers.getNextPage());
    model.addAttribute("finalPage", numbers.getFinalPage());
    model.addAttribute("listItemNo", numbers.getListItemNo());
    return "bbs/list";
  }
  
  //..게시판 수정 메소드 생략..
  
}
</pre>

<div class="filename">/bbs/list.html</div>
<pre class="prettyprint">&lt;!DOCTYPE html&gt;
&lt;!--/* 1 title, 2 metas, 3 links, 4 scripts, 5 mainmenu, 6 i18n, 7 maintext, 8 submenu, 9 reference */--&gt;
&lt;html th:replace="~{layout/baseLayoutFile :: layout (~{::title}, ~{::meta}, ~{::link}, ~{::script}, ~{::nav}, ~{::div}, ~{::section}, ~{::aside}, ~{::footer})}" xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
&lt;title th:text="${#locale.language == 'ko'} ? _ : 'List of Posts'"&gt;글 목록&lt;/title&gt;
&lt;meta name="Keywords" th:content="${#locale.language == 'ko'} ? '글 목록' : 'List of Posts'" /&gt;
&lt;meta name="Description" th:content="${#locale.language == 'ko'} ? '글 목록' : 'List of Posts'" /&gt;
&lt;link rel="stylesheet" media="all" th:href="${#locale.language == 'ko'} ? @{/static/css/ko.css} : @{/static/css/en.css}" /&gt;
&lt;script th:src="@{/static/js/cookie.js}"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;nav th:replace="~{commons/mainmenu :: mainmenu}"&gt;&lt;/nav&gt;
&lt;div id="i18n"&gt;&lt;/div&gt;
&lt;section th:replace="~{articles/list :: article}"&gt;&lt;/section&gt;
&lt;aside th:replace="~{bbs/menu :: index}"&gt;&lt;/aside&gt;
&lt;footer th:replace="${#locale.language == 'ko'} ? ~{bbs/refs :: references} : ~{bbs/refs_en :: reference}"&gt;&lt;/footer&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

<p>
목록 테스트<br />
<img src="../../../static/images/list-test.png" th:src="@{/static/images/list-test.png}" class="browser-output" alt="목록 페이지 테스트" />
</p>

<p>
페이징 테스트<br />
<img src="../../../static/images/list-test-paging.png" th:src="@{/static/images/list-test-paging.png}" class="browser-output" alt="목록 페이지 페이징 테스트" />
</p>

<p>
검색 테스트<br />
<img src="../../../static/images/list-test-search.png" th:src="@{/static/images/list-test-search.png}" class="browser-output" alt="목록 페이지 검색 테스트" />
</p>

<p>
페이지당 게시글 수 테스트<br />
<img src="../../../static/images/list-test-number-per-page.png" th:src="@{/static/images/list-test-number-per-page.png}" class="browser-output" alt="목록 페이지 페이지당 게시글 수 테스트" />
</p>

<div class="filename">BoardMapper.xml</div>
<pre class="prettyprint">&lt;insert id="insertPost" parameterType="net.java_school.board.Post" useGeneratedKeys="true"&gt;
  &lt;selectKey keyProperty="postNo" resultType="int" order="BEFORE"&gt;
    SELECT post_seq.nextval FROM dual
  &lt;/selectKey&gt;
  INSERT INTO post (postno, boardcd, title, content, username, hit, regdate)
  VALUES (#{postNo}, #{boardCd}, #{title}, #{content}, #{username}, 0, sysdate)
&lt;/insert&gt;
</pre>

<div class="filename">BoardMapper.java</div>
<pre class="prettyprint">public int insertPost(Post post);
</pre>

<div class="filename">BoardService.java</div>
<pre class="prettyprint">@PreAuthorize("hasAnyRole('ADMIN','USER')")
public int addPost(Post post);
</pre>

<div class="filename">BoardServiceImpl.java</div>
<pre class="prettyprint">@Override
public int addPost(Post post) {
  return boardMapper.insertPost(post);
}
</pre>

<div class="filename">BbsController.java</div>
<pre class="prettyprint">@PostMapping("{boardCd}")
public String write(Post post, 
    @PathVariable(name="boardCd") String boardCd,
    Locale locale, Model model, Principal principal) {
  post.setBoardCd(boardCd);
  post.setUsername(principal.getName());
  boardService.addPost(post);
  return "redirect:/bbs/" + boardCd + "?page=1";
}
</pre>

<p>
다음 임포트 문이 필요하다.<br />
import java.security.Principal;<br />
import org.springframework.web.bind.annotation.PostMapping;<br />
</p>

<div class="filename">BoardMapper.xml</div>
<pre class="prettyprint">&lt;update id="updateHit" parameterType="int"&gt;
  UPDATE post SET hit = hit + 1 WHERE postno = #{postNo}
&lt;/update&gt;
&lt;select id="selectOne" parameterType="int" resultType="net.java_school.board.Post"&gt;
  SELECT postno,title,content,username,hit,regdate
  FROM post
  WHERE postno = #{postNo}
&lt;/select&gt;
&lt;select id="selectNextOne" parameterType="hashmap" resultType="Integer"&gt;
  SELECT postno
  FROM
    (SELECT rownum r,a.*
    FROM
      (SELECT postno
      FROM post
      WHERE
        boardcd = #{boardCd}
        AND postno &gt; #{postNo}
      &lt;if test="search != null and search != ''"&gt;
        AND (title LIKE '%${search}%' OR content LIKE '%${search}%')
      &lt;/if&gt;
      ORDER BY postno)
    a)
  WHERE r = 1
&lt;/select&gt;
&lt;select id="selectPrevOne" parameterType="hashmap" resultType="Integer"&gt;
  SELECT postno
  FROM
    (SELECT rownum r,a.*
    FROM
      (SELECT postno
      FROM post
    WHERE
        boardcd = #{boardCd}
        AND postno &lt; #{postNo}
      &lt;if test="search != null and search != ''"&gt;
        AND (title LIKE '%${search}%' OR content LIKE '%${search}%')
      &lt;/if&gt;
      ORDER BY postno DESC)
    a)
  WHERE r = 1
&lt;/select&gt;
</pre>

<div class="filename">BoardMapper.java</div>
<pre class="prettyprint">public void updateHit(int postNo);
public Post selectOne(int postNo);
public Integer selectNextOne(HashMap&lt;String, String&gt; hashmap);
public Integer selectPrevOne(HashMap&lt;String, String&gt; hashmap);
</pre>

<div class="filename">BoardService.java</div>
<pre class="prettyprint">@PreAuthorize("hasAnyRole('ADMIN','USER')")
public void increaseHit(int postNo);
@PreAuthorize("hasAnyRole('ADMIN','USER')")
public Post getPost(int postNo);
@PreAuthorize("hasAnyRole('ROLE_ADMIN','ROLE_USER')")
public Integer getNextPostNo(int postNo, String boardCd, String search);
@PreAuthorize("hasAnyRole('ROLE_ADMIN','ROLE_USER')")
public Integer getPrevPostNo(int postNo, String boardCd, String search);	
</pre>

<div class="filename">BoardServiceImpl.java</div>
<pre class="prettyprint">@Override
public void increaseHit(int postNo) {
  boardMapper.updateHit(postNo);
}
@Override
public Post getPost(int postNo) {
  return boardMapper.selectOne(postNo);
}
@Override
public Integer getNextPostNo(int postNo, String boardCd, String search) {
  HashMap&lt;String, String&gt; hashmap = new HashMap&lt;&gt;();
  Integer no = postNo;
  hashmap.put("postNo", no.toString());
  hashmap.put("boardCd", boardCd);
  hashmap.put("search", search);

  return boardMapper.selectNextOne(hashmap);
}
@Override
public Integer getPrevPostNo(int postNo, String boardCd, String search) {
  HashMap&lt;String, String&gt; hashmap = new HashMap&lt;&gt;();
  Integer no = postNo;
  hashmap.put("postNo", no.toString());
  hashmap.put("boardCd", boardCd);
  hashmap.put("search", search);

  return boardMapper.selectPrevOne(hashmap);
}
</pre>

<div class="filename">BbsController.java</div>
<pre class="prettyprint">@GetMapping("{boardCd}/{postNo}")
public String view(
    @CookieValue(name="numberPerPage", defaultValue="10") Integer numberPerPage,
    @PathVariable(name="boardCd") String boardCd,
    @PathVariable(name="postNo") Integer postNo,
    @RequestParam(name="page", defaultValue="1") Integer page,
    @RequestParam(name="search", defaultValue="") String search,
    Locale locale, Model model) {

  boardService.increaseHit(postNo);//조회수 1 증가
  Post one = boardService.getPost(postNo);//내용을 볼 Post
  int nextPostNo = 0;
  Integer ret = boardService.getNextPostNo(postNo, boardCd, search);//다음 글
  if (ret != null) nextPostNo = ret.intValue();
  int prevPostNo = 0;
  ret = boardService.getPrevPostNo(postNo, boardCd, search);//이전 글
  if (ret != null) prevPostNo = ret.intValue();
  
  List&lt;Board&gt; boards = boardService.getBoards();//모든 게시판 레코드
  
  String lang = locale.getLanguage();
  String boardName = this.getBoardName(boardCd, lang);//게시판 이름
	
  int pagePerBlock = 10;
  int totalRecord = boardService.getTotalRecord(boardCd, search);총 레코드 수
  
  //페이징 처리에 필요한 숫자
  NumbersForPaging numbers = this.getNumbersForPaging(totalRecord, page, numberPerPage, pagePerBlock);

  int start = (page - 1) * numberPerPage + 1;
  int end = page * numberPerPage;
  
  //목록 테이블에 채울 List&lt;Post&gt;
  List&lt;Post&gt; list = boardService.getPostList(boardCd, search, start, end);

  model.addAttribute("one", one);
  model.addAttribute("nextPostNo", nextPostNo);
  model.addAttribute("prevPostNo", prevPostNo);
  model.addAttribute("boards", boards);
  model.addAttribute("boardName", boardName);
  model.addAttribute("posts", posts);
  model.addAttribute("prevPage", numbers.getPrevPage());
  model.addAttribute("pages", numbers.getPages());
  model.addAttribute("nextPage", numbers.getNextPage());
  model.addAttribute("finalPage", numbers.getFinalPage());
  model.addAttribute("listItemNo", numbers.getListItemNo());		

  return "bbs/view";
}
</pre>

<div class="filename">/bbs/view.html</div>
<pre class="prettyprint">&lt;!DOCTYPE html&gt;
&lt;!--/* 1 title, 2 metas, 3 links, 4 scripts, 5 mainmenu, 6 i18n, 7 maintext, 8 submenu, 9 reference */--&gt;
&lt;html th:replace="~{layout/baseLayoutFile :: layout (~{::title}, ~{::meta}, ~{::link}, ~{}, ~{::nav}, ~{::div}, ~{::section}, ~{::aside}, ~{::footer})}" xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
&lt;title th:text="${#locale.language == 'ko'} ? _ : 'View the Post'"&gt;내용보기&lt;/title&gt;
&lt;meta name="Keywords" th:content="${#locale.language == 'ko'} ? '내용보기' : 'View the post'" /&gt;
&lt;meta name="Description" th:content="${#locale.language == 'ko'} ? '내용보기' : 'View the post'" /&gt;
&lt;link rel="stylesheet" media="all" th:href="${#locale.language == 'ko'} ? @{/static/css/ko.css} : @{/static/css/en.css}" /&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;nav th:replace="~{commons/mainmenu :: mainmenu}"&gt;&lt;/nav&gt;
&lt;div id="i18n"&gt;&lt;/div&gt;
&lt;section th:replace="~{articles/view :: article}"&gt;&lt;/section&gt;
&lt;aside th:replace="~{bbs/menu :: index}"&gt;&lt;/aside&gt;
&lt;footer th:replace="${#locale.language == 'ko'} ? ~{bbs/refs :: references} : ~{bbs/refs_en :: reference}"&gt;&lt;/footer&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

<p>
<img src="../../../static/images/selected-item.png" th:src="@{/static/images/selected-item.png}" alt="읽고 있는 게시글 강조" />
</p>

<div class="filename">BoardMapper.xml</div>
<pre class="prettyprint">&lt;update id="updatePost" parameterType="net.java_school.board.Post"&gt;
  UPDATE post
  SET title = #{title}, content = #{content} 
  WHERE postno = #{postNo}
&lt;/update&gt;
</pre>

<div class="filename">BoardMapper.java</div>
<pre class="prettyprint">public void updatePost(Post post);
</pre>

<div class="filename">BoardService.java</div>
<pre class="prettyprint">@PreAuthorize("hasRole('ADMIN') or #post.username == principal.username")
public void editPost(@P("post") Post post);
</pre>

<p>
다음 임포트 문이 필요하다.<br />
import org.springframework.security.access.method.P;<br />
</p>

<div class="filename">BoardServiceImpl.java</div>
<pre class="prettyprint">@Override
public void editPost(Post post) {
  boardMapper.updatePost(post);
}
</pre>

<div class="filename">BbsController.java</div>
<pre class="prettyprint">@PutMapping("{boardCd}/{postNo}")
public String editPost(Post post,
    @PathVariable(name="boardCd") String boardCd,
    @PathVariable(name="postNo") Integer postNo,
    @RequestParam(name="page") Integer page,
    @RequestParam(name="search") String search,
    Locale locale, Model model) throws Exception {
  post.setPostNo(postNo);
  post.setBoardCd(boardCd);
  String username = boardService.getPost(post.getPostNo()).getUsername();
  post.setUsername(username);
  boardService.editPost(post);
  search = URLEncoder.encode(search, "UTF-8");
  return "redirect:/bbs/" + boardCd + "/" + postNo + "?page=" + page + "&amp;search=" + search;
}
</pre>

<div class="filename">BoardMapper.xml</div>
<pre class="prettyprint">&lt;delete id="deletePost" parameterType="int"&gt;
  DELETE FROM post WHERE postno = #{postNo}
&lt;/delete&gt;
</pre>

<div class="filename">BoardMapper.java</div>
<pre class="prettyprint">public void deletePost(int postNo);
</pre>

<div class="filename">BoardService.java</div>
<pre class="prettyprint">@PreAuthorize("hasRole('ADMIN') or #post.username == principal.username")
  public void deletePost(@P("post") Post post);
</pre>

<div class="filename">BoardServiceImpl.java</div>
<pre class="prettyprint">@Override
public void deletePost(Post post) {
  boardMapper.deletePost(post.getPostNo());
}
</pre>

<div class="filename">BbsController.java</div>
<pre class="prettyprint">@DeleteMapping("/{boardCd}/{postNo}")
public String deletePost(
    @PathVariable(name="boardCd") String boardCd,
    @PathVariable(name="postNo") Integer postNo,
    @RequestParam(name="page") Integer page,
    @RequestParam(name="search") String search) throws Exception {
  Post post = boardService.getPost(postNo);
  boardService.deletePost(post);
  search = URLEncoder.encode(search, "UTF-8");
  return "redirect:/bbs/" + boardCd + "?page=" + page + "&amp;search=" + search;
}
</pre>
</article>

<article id="admin">
<h2>관리자</h2>

<h3>회원 관리 RESTful URL</h3>

<pre style="border: 2px dotted grey;padding: 0.3em;">회원 목록	GET	/users?search=
비밀번호 변경	PATCH	/users/phoebe
권한 삭제	DELETE	/users/phoebe/ROLE_USER
권한 추가	POST	/users/phoebe/ROLE_USER
계정 삭제	DELETE	/users/phoebe
</pre>

<h3>관리자 화면 프로토타입</h3>

<h4>회원 관리 페이지 프로토타입</h4>

<div class="filename">articles/users.html</div>
<pre class="prettyprint">&lt;html xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
&lt;title&gt;Users&lt;/title&gt;
&lt;meta name="Keywords" content="Users" /&gt;
&lt;meta name="Description" content="Users" /&gt;
&lt;link rel="stylesheet" media="screen" href="../../../static/css/en.css" /&gt;
&lt;link rel="stylesheet" media="screen" href="../../../static/css/screen.css" /&gt;
&lt;style&gt;
article {
  width: 830px;
  margin: 0 auto; 
}
&lt;/style&gt;
&lt;script src="../../../static/js/jquery.js"&gt;&lt;/script&gt;
&lt;script&gt;
$(document).ready(function() {
  $('.username').click(function(e) {
    e.preventDefault();
    $('#authorities').empty();
    var username = $(this).text();
    var authorities = $(this).parent().next().text();
    var arr = authorities.split(",");
    var authorities_del = ""
    for (var idx in arr) {
      authorities_del += arr[idx] + ' &lt;a href="#" title="' + arr[idx] + '" class="del-auth-link"&lt;x&lt;/a&gt; ';
    }
    $('#changePasswordForm input[name*=username]').val(username);
    $('#addAuthorityForm input[name*=username]').val(username);
    $('#deleteAccountForm input[name*=username]').val(username);
    $('#authorities').append(authorities_del);
  });
});
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;article&gt;
&lt;script th:inline="javascript"&gt;

&lt;/script&gt;
&lt;h3&gt;Users&lt;/h3&gt;
&lt;table id="list-table" class="bbs-table" style="width: 49%;float: left;"&gt;
&lt;tr&gt;
  &lt;th style="text-align: left;"&gt;No&lt;/th&gt;
  &lt;th style="text-align: left;"&gt;Username&lt;/th&gt;
  &lt;th style="text-align: left;"&gt;Authorities&lt;/th&gt;
&lt;/tr&gt;
&lt;!--/*--&gt;
&lt;tr class="data-row"&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" class="username"&gt;admin&lt;/a&gt;&lt;/td&gt;
  &lt;td&gt;ROLE_USER,ROLE_ADMIN&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class="data-row"&gt;
  &lt;td&gt;2&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" class="username"&gt;charles&lt;/a&gt;&lt;/td&gt;
  &lt;td&gt;ROLE_USER&lt;/td&gt;
&lt;/tr&gt;
&lt;!--*/--&gt;
&lt;/table&gt;
&lt;div style="width: 49%;float: right;"&gt;
  &lt;form id="changePasswordForm"&gt;
  &lt;table class="bbs-table"&gt;
  &lt;caption&gt;Change Password&lt;/caption&gt;
  &lt;tr&gt;
    &lt;td&gt;Username&lt;/td&gt;
    &lt;td&gt;
      &lt;input type="text" name="username" disabled /&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;New Password&lt;/td&gt;
    &lt;td&gt;
      &lt;input type="password" name="password" /&gt;
      &lt;input type="submit" value="Submit" /&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
  &lt;/table&gt;
  &lt;/form&gt;
  &lt;form id="addAuthorityForm"&gt;
  &lt;table class="bbs-table"&gt;
  &lt;caption&gt;Add Authorities&lt;/caption&gt;
  &lt;tr&gt;
    &lt;td&gt;Username&lt;/td&gt;
    &lt;td&gt;&lt;input type="text" name="username" disabled /&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;Authorities&lt;/td&gt;
    &lt;td id="authorities"&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;Add Authority&lt;/td&gt;
    &lt;td&gt;
      &lt;select name="authority" id="dropDownAuthority"&gt;
        &lt;option value="ROLE_USER" selected="selected"&gt;USER&lt;/option&gt;
        &lt;option value="ROLE_ADMIN"&gt;ADMIN&lt;/option&gt;
      &lt;/select&gt;
      &lt;input type="submit" value="Submit" /&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
  &lt;/table&gt;
  &lt;/form&gt;
  &lt;form id="deleteAccountForm"&gt;
  &lt;table class="bbs-table"&gt;
  &lt;caption&gt;Delete Account&lt;/caption&gt;
  &lt;tr&gt;
    &lt;td&gt;Username&lt;/td&gt;
    &lt;td&gt;
      &lt;input type="text" name="username" disabled /&gt;
      &lt;input type="submit" value="Delete" /&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
  &lt;/table&gt;
  &lt;/form&gt;
&lt;/div&gt;
&lt;form id="deleteAuthorityForm" action="/admin/users/" th:method="delete"&gt;
&lt;input type="hidden" name="authority" /&gt;
&lt;/form&gt;
&lt;/article&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

<p>
<img src="../../../static/images/users-prototype.png" th:src="@{/static/images/users-prototype.png}" class="browser-output" alt="관리자 화면 중 회원 관리 프로토타입" />
</p>

<pre class="prettyprint">var link = /*[[@{/}]]*/'';
</pre>

<div class="filename">articles/boards.html</div>
<pre class="prettyprint">&lt;html xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
&lt;title&gt;Boards&lt;/title&gt;
&lt;meta name="Keywords" content="Boards" /&gt;
&lt;meta name="Description" content="Boards" /&gt;
&lt;link rel="stylesheet" media="screen" href="../../../static/css/en.css" /&gt;
&lt;link rel="stylesheet" media="screen" href="../../../static/css/screen.css" /&gt;
&lt;style&gt;
article {
  width: 830px;
  margin: 0 auto; 
}
&lt;/style&gt;
&lt;script src="../../../static/js/jquery.js"&gt;&lt;/script&gt;
&lt;script&gt;
$(document).ready(function() {
  $('.board-code').click(function(e) {
    e.preventDefault();
    var boardCd = $(this).text();
    $('#editBoardForm input[name*=boardCd]').val(boardCd);
    $('#deleteBoardForm input[name*=boardCd]').val(boardCd);
  });
});	
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;article&gt;
&lt;script th:inline="javascript"&gt;
var link = /*[[@{/}]]*/'';
&lt;/script&gt;
&lt;h3&gt;Boards&lt;/h3&gt;
&lt;div style="width: 49%;float: left;"&gt;
&lt;table id="list-table" class="bbs-table"&gt;
&lt;tr&gt;
  &lt;th style="text-align: left"&gt;No&lt;/th&gt;
  &lt;th style="text-align: left"&gt;Code&lt;/th&gt;
  &lt;th style="text-align: left"&gt;Name&lt;/th&gt;
  &lt;th style="text-align: left"&gt;Name_ko&lt;/th&gt;
&lt;/tr&gt;
&lt;!--/*--&gt;
&lt;tr&gt;
  &lt;td&gt;1&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" class="board-code"&gt;chat&lt;/a&gt;&lt;/td&gt;
  &lt;td&gt;Chat&lt;/td&gt;
  &lt;td&gt;자유 토론&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;2&lt;/td&gt;
  &lt;td&gt;&lt;a href="#" class="board-code"&gt;notice&lt;/a&gt;&lt;/td&gt;
  &lt;td&gt;Notice&lt;/td&gt;
  &lt;td&gt;공지&lt;/td&gt;
&lt;/tr&gt;
&lt;!--*/--&gt;
&lt;/table&gt;
&lt;form id="searchForm" style="margin-top: 10px;text-align: center;"&gt;
  &lt;input type="text" name="search" style="width: 120px;" /&gt;
  &lt;input type="submit" value="Search" /&gt;
&lt;/form&gt;
&lt;/div&gt;
&lt;div style="width: 49%;float: right;"&gt;
  &lt;form id="editBoardForm"&gt;
  &lt;table class="bbs-table"&gt;
  &lt;caption&gt;Edit Board&lt;/caption&gt;
  &lt;tr&gt;
    &lt;td&gt;Code&lt;/td&gt;
    &lt;td&gt;&lt;input type="text" name="boardCd" style="width: 135px;" disabled /&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;Name&lt;/td&gt;
    &lt;td&gt;
      &lt;input type="text" name="boardNm" style="width: 135px;" /&gt;
      &lt;input type="button" id="name-btn" value="Submit" /&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;Name_ko&lt;/td&gt;
    &lt;td&gt;
      &lt;input type="text" name="boardNm_ko" style="width: 135px;" /&gt;
      &lt;input type="button" id="ko-name-btn" value="Submit" /&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
  &lt;/table&gt;
  &lt;/form&gt;

  &lt;form id="newBoardForm"&gt;
  &lt;table class="bbs-table"&gt;
  &lt;caption&gt;New Board&lt;/caption&gt;
  &lt;tr&gt;
    &lt;td&gt;Code&lt;/td&gt;
    &lt;td&gt;&lt;input type="text" name="boardCd" style="width: 135px;" /&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;Name&lt;/td&gt;
    &lt;td&gt;&lt;input type="text" name="boardNm" style="width: 135px;" /&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;Name_ko&lt;/td&gt;
    &lt;td&gt;&lt;input type="text" name="boardNm_ko" style="width: 135px;" /&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td cols="2" style="border: none;"&gt;&lt;input type="submit" value="Submit" /&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;/table&gt;
  &lt;/form&gt;

  &lt;form id="deleteBoardForm"&gt;
  &lt;table class="bbs-table"&gt;
  &lt;caption&gt;Delete Board&lt;/caption&gt;
  &lt;tr&gt;
    &lt;td&gt;Code&lt;/td&gt;
    &lt;td&gt;
      &lt;input type="text" name="boardCd" style="width: 135px;" /&gt;
      &lt;input type="submit" value="Submit" /&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
  &lt;/table&gt;
  &lt;/form&gt;
&lt;/div&gt;

&lt;/article&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

<p>
<img src="../../../static/images/boards-prototype.png" th:src="@{/static/images/boards-prototype.png}" class="browser-output" alt="관리자 화면 중 게시판 관리 프로토타입" />
</p>

<pre class="prettyprint">insert into authorities values ('admin','ROLE_ADMIN');
commit;
</pre>

<div class="filename">baseLayoutFile.html</div>
<pre class="prettyprint">&lt;th:block sec:authorize="isAuthenticated()"&gt;
  &lt;a href="#" id="logout"&gt;&lt;button type="button" th:text="${lang == null} ? #{logout} : (${lang == 'ko'} ? _ : 'Logout')"&gt;로그아웃&lt;/button&gt;&lt;/a&gt;
  &lt;a href="#" th:href="@{/user/editAccount}"&gt;&lt;button type="button" th:text="${lang == null} ? #{edit.my.account} : (${lang == 'ko'} ? _ : 'Edit Account')"&gt;내 정보 수정&lt;/button&gt;&lt;/a&gt;
&lt;/th:block&gt;
<strong>&lt;th:block sec:authorize="hasRole('ROLE_ADMIN')"&gt;</strong>
  <strong>&lt;a th:href="@{/admin}" /&gt;&lt;button type="button"&gt;&lt;b&gt;Administrator&lt;/b&gt;&lt;/button&gt;&lt;/a&gt;</strong>
<strong>&lt;/th:block&gt;</strong>
</pre>

<div class="filename">AdminController.java</div>
<pre class="prettyprint">package net.java_school.controller;

import org.springframework.stereotype.Controller;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
@RequestMapping("admin")
public class AdminController {
  @GetMapping
  public String boards() {
    return "admin/boards";
  }
  @GetMapping("users")
  public String users() {
    return "admin/users";
  }
}
</pre>

<div class="filename">admin/menu.html</div>
<pre class="prettyprint">&lt;html xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
&lt;link rel="stylesheet" media="all" href="../../../static/css/screen.css" /&gt;
&lt;link rel="stylesheet" media="all" href="../../../static/css/en.css" /&gt;
&lt;style&gt;
#sidebar {
  margin-left: 0;
}
&lt;/style&gt;
&lt;body&gt;
&lt;th:block th:fragment="index" id="sidebar"&gt;
&lt;h1&gt;Admin&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href="#" th:href="@{/admin}"&gt;Boards&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="#" th:href="@{/admin/users}"&gt;Users&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/th:block&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

<div class="filename">admin.css</div>
<pre class="prettyprint">#content  {
  margin-right: 0;
}
</pre>

<h3>핸들러 요청 페이지 작성</h3>

<div class="filename">admin/users.html</div>
<pre class="prettyprint">&lt;!DOCTYPE html&gt;
&lt;!--/* 1 title, 2 metas, 3 links, 4 scripts, 5 mainmenu, 6 i18n, 7 maintext, 8 submenu, 9 reference */--&gt;
&lt;html th:replace="~{layout/baseLayoutFile :: layout (~{::title}, ~{::meta}, ~{::link}, ~{}, ~{::nav}, ~{::div}, ~{::section}, ~{::aside}, ~{})}" xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
&lt;title&gt;Admin :: Users&lt;/title&gt;
&lt;meta name="Keywords" content="Admin :: Users" /&gt;
&lt;meta name="Description" content="Admin :: Users" /&gt;
&lt;link rel="stylesheet" media="all" th:href="@{/static/css/en.css}" /&gt;
<strong>&lt;link rel="stylesheet" media="all" th:href="@{/static/css/admin.css}" /&gt;</strong>
&lt;script th:src="@{/static/js/users.js}"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;nav th:replace="~{commons/mainmenu :: mainmenu}"&gt;&lt;/nav&gt;
&lt;div id="i18n"&gt;&lt;/div&gt;
&lt;section th:replace="~{articles/users :: article}"&gt;&lt;/section&gt;
&lt;aside th:replace="~{admin/menu :: index}"&gt;&lt;/aside&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

<div class="filename">admin/boards.html</div>
<pre class="prettyprint">&lt;!DOCTYPE html&gt;
&lt;!--/* 1 title, 2 metas, 3 links, 4 scripts, 5 mainmenu, 6 i18n, 7 maintext, 8 submenu, 9 reference */--&gt;
&lt;html th:replace="~{layout/baseLayoutFile :: layout (~{::title}, ~{::meta}, ~{::link}, ~{}, ~{::nav}, ~{::div}, ~{::section}, ~{::aside}, ~{})}" xmlns:th="http://www.thymeleaf.org"&gt;
&lt;head&gt;
&lt;title&gt;Admin :: Boards&lt;/title&gt;
&lt;meta name="Keywords" content="Admin :: Boards" /&gt;
&lt;meta name="Description" content="Admin :: Boards" /&gt;
&lt;link rel="stylesheet" media="all" th:href="@{/static/css/en.css}" /&gt;
&lt;link rel="stylesheet" media="all" th:href="@{/static/css/admin.css}" /&gt;
&lt;script th:src="@{/static/js/boards.js}"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;nav th:replace="~{commons/mainmenu :: mainmenu}"&gt;&lt;/nav&gt;
&lt;div id="i18n"&gt;&lt;/div&gt;
&lt;section th:replace="~{articles/boards :: article}"&gt;&lt;/section&gt;
&lt;aside th:replace="~{admin/menu :: index}"&gt;&lt;/aside&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

<h3>시큐리티 설정 클래스 편집</h3>

<div class="filename">SecurityConfig.java</div>
<pre class="prettyprint">.requestMatchers(HttpMethod.DELETE, "/boards/**").hasRole("ADMIN")
.requestMatchers(HttpMethod.PATCH, "/boards/**").hasRole("ADMIN")
.requestMatchers(HttpMethod.PUT, "/boards/**").hasRole("ADMIN")
.requestMatchers(HttpMethod.POST, "/boards/**").hasRole("ADMIN")
.requestMatchers(HttpMethod.GET, "/boards/**").hasRole("ADMIN")
.requestMatchers(HttpMethod.DELETE, "/users/**").hasRole("ADMIN")
.requestMatchers(HttpMethod.PATCH, "/users/**").hasRole("ADMIN")
.requestMatchers(HttpMethod.POST, "/users/**").hasRole("ADMIN")
.requestMatchers(HttpMethod.GET, "/users/**").hasRole("ADMIN")
.requestMatchers(HttpMethod.GET, "/admin/**").hasRole("ADMIN")
</pre>

<div class="filename">SecurityConfig.java</div>
<pre class="prettyprint">.httpBasic(withDefaults()).csrf(AbstractHttpConfigurer::disable);
</pre>

<h3>jackson-databind 의존성 추가</h3>

<div class="filename">pom.xml</div>
<pre class="prettyprint">&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind --&gt;
&lt;dependency&gt;
  &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
  &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;
  &lt;version&gt;2.18.2&lt;/version&gt;
&lt;/dependency&gt;
</pre>

<h3>1차 테스트</h3>

<pre class="prettyprint">$(document).ready(function() {
  $('.username').click(function(e) {
    e.preventDefault();
    $('#authorities').empty();
    var username = $(this).text();
    var authorities = $(this).parent().next().text();
    var arr = authorities.split(",");
    var authorities_del = ""
    for (var idx in arr) {
      authorities_del += arr[idx] + ' &lt;a href="#" title="' + arr[idx] + '" class="del-auth-link"&gt;x&lt;/a&gt; ';
    }
    $('#changePasswordForm input[name*=username]').val(username);
    $('#addAuthorityForm input[name*=username]').val(username);
    $('#deleteAccountForm input[name*=username]').val(username);
    $('#authorities').append(authorities_del);
  });
});
</pre>

<h3>회원 관리 서버측 구현</h3>

<div class="filename">RestUsersController.java</div>
<pre class="prettyprint">package net.java_school.controller;

import java.util.List;

import net.java_school.user.User;
import net.java_school.user.UserService;

import org.springframework.beans.factory.annotation.Autowired;

import org.springframework.http.HttpStatus;

import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.DeleteMapping;
import org.springframework.web.bind.annotation.PatchMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.ResponseStatus;

import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;

@RestController
@RequestMapping("users")
public class RestUsersController {

  @Autowired
  private UserService userService;

  @Autowired
  private BCryptPasswordEncoder bcryptPasswordEncoder;

  @GetMapping
  public List&lt;User&gt; getUsers(@RequestParam(name="search", defaultValue="") String search) {
    List&lt;User&gt; users = userService.getUsers(search);
    return users;
  }
  @PatchMapping("{username}")
  @ResponseStatus(code=HttpStatus.NO_CONTENT)
  public void patchUser(@PathVariable(name="username") String username, @RequestBody User user) {
    String password = user.getPassword();
    if (password != null) {
      userService.changePassword(username, this.bcryptPasswordEncoder.encode(password));
    }
    //email, fullName, address ..등 사용자 정보를 추가한다면, 위와 같은 로직으로 추가한다
  }
  @DeleteMapping("{username}/{authority}")
  @ResponseStatus(code=HttpStatus.NO_CONTENT)
  public void deleteAuthority(@PathVariable(name="username") String username,
      @PathVariable(name="authority") String authority) {
    userService.deleteAuthority(username, authority);
  }
  @PostMapping("{username}/{authority}")
  @ResponseStatus(code=HttpStatus.NO_CONTENT)
  public void addAuthority(@PathVariable(name="username") String username,
       @PathVariable(name="authority") String authority) {
    userService.addAuthority(username, authority);
  }
  @DeleteMapping("{username}")
  @ResponseStatus(code=HttpStatus.NO_CONTENT)
  public void deleteUser(@PathVariable(name="username") String username) {
    userService.deleteUser(username);
  }
}
</pre>

<div class="filename">UserService.java</div>
<pre class="prettyprint">@PreAuthorize("hasRole('ROLE_ADMIN')")
public List&lt;User&gt; getUsers(String search);
@PreAuthorize("hasAnyRole('ADMIN','USER')")
public int changePassword(String username, String password);
@PreAuthorize("hasRole('ADMIN') or #username == principal.username")
public String getPassword(@P("username") String username);
@PreAuthorize("hasRole('ROLE_ADMIN')")
public int deleteAuthority(String username, String authority);
@PreAuthorize("hasRole('ROLE_ADMIN')")
public int addAuthority(String username, String authority);
@PreAuthorize("hasRole('ROLE_ADMIN')")
public int deleteUser(String username);
</pre>

<p>
다음 임포트 문이 필요하다.<br />
import org.springframework.security.access.method.P;<br />
</p>

<div class="filename">UserServiceImpl.java</div>
<pre class="prettyprint">@Override
public List&lt;User&gt; getUsers(String search) {
  return userMapper.selectAll(search);
}
@Override
public int changePassword(String username, String password) {
  return userMapper.updatePassword(username, password);
}
@Override
public String getPassword(String username) {
  return userMapper.selectPassword(username);
}	
@Override
public int deleteAuthority(String username, String authority) {
  return userMapper.deleteAuthority(username, authority);
}
@Override
public int addAuthority(String username, String authority) {
  return userMapper.insertAuthority(username, authority);
}
@Override
public int deleteUser(String username) {
  return userMapper.updateEnabledToZero(username);
}
</pre>

<div class="filename">UserMapper.java</div>
<pre class="prettyprint">public List&lt;User&gt; selectAll(@Param("search") String search);
public int updatePassword(@Param("username") String username, @Param("password") String password);
public String selectPassword(@Param("username") String username);
public int deleteAuthority(@Param("username") String username, @Param("authority") String authority);
public int insertAuthority(@Param("username") String username, @Param("authority") String authority);
public int updateEnabledToZero(@Param("username") String username);
</pre>

<div class="filename">UserMapper.xml</div>
<pre class="prettyprint">&lt;select id="selectAll" resultMap="UserResult"&gt;
  SELECT username
  FROM users
  WHERE enabled = 1
  &lt;if test="search != null and search != ''"&gt;
  AND username LIKE '%' || #{search} || '%'
  &lt;/if&gt;
  ORDER BY username ASC
&lt;/select&gt;
&lt;resultMap id="UserResult" type="net.java_school.user.User"&gt;
  &lt;id property="username" column="username" /&gt;
  &lt;collection property="authorities" javaType="ArrayList" column="username" ofType="string" select="selectAuthoritiesOfUser" /&gt;
&lt;/resultMap&gt;
&lt;select id="selectAuthoritiesOfUser" resultType="string"&gt;
  SELECT authority
  FROM authorities
  WHERE username = #{username}
&lt;/select&gt;
&lt;delete id="deleteAuthority"&gt;
  DELETE authorities WHERE username = #{username} and authority = #{authority}
&lt;/delete&gt;
&lt;insert id="insertAuthority"&gt;
  INSERT INTO authorities VALUES (#{username}, #{authority})
&lt;/insert&gt;
&lt;update id="updateEnabledToZero"&gt;
  UPDATE users SET enabled = 0 WHERE username = #{username}
&lt;/update&gt;
</pre>

<h3>회원 관리 자바스크립트 구현</h3>

<h4>검색 기능</h4>

<div class="filename">users.js</div>
<pre class="prettyprint">function showListItems(search) {
  if (search == null) search = '';
  var url = link + 'users?search=' + search;
  $.getJSON(url, function (data) {
    $('#list-table .data-row').remove();
    $.each(data, function (i, item) {
      var trs = '&lt;tr class="data-row"&gt;'
        + '&lt;td&gt;' + (i+1) + '&lt;/td&gt;'
        + '&lt;td&gt;' + '&lt;a href="#" class=username&gt;' + item.username + '&lt;/a&gt;&lt;/td&gt;'
        + '&lt;td&gt;' + item.authorities + '&lt;/td&gt;'
        + '&lt;/tr&gt;'
      $('#list-table').append(trs);
      //console.log(item);
    });
  });
}
<strong>$(document).ready(function() {</strong>
  <strong>$('#searchForm').submit(function(e) {</strong>
    <strong>e.preventDefault();</strong>
    <strong>var search = $('#searchForm input[name*=search]').val();</strong>
    <strong>showListItems(search);</strong>
    <strong>$('#searchForm input[name*=search]').val('');</strong>
  <strong>});</strong>
<strong>});</strong>
</pre>

<p>
<img src="../../../static/images/users-search.png" th:src="@{/static/images/users-search.png}" class="browser-output" alt="search 버튼 클릭 전" />
</p>

<p>
<img src="../../../static/images/users-search2.png" th:src="@{/static/images/users-search2.png}" class="browser-output" alt="search 버튼 클릭 후" />
</p>

<pre class="prettyprint">$(document).on('click', '.username', function (e) {
  e.preventDefault();
  $('#authorities').empty();
  var username = $(e.target).text();
  var authorities = $(e.target).parent().next().text();
  var arr = authorities.split(",");
  var authorities_del = ""
  for (var idx in arr) {
    if (arr[idx] != '')
      authorities_del += ' &lt;a href="#" title="' + arr[idx] + '" class="del-auth-link"&gt;' + arr[idx] + ' x&lt;/a&gt; ';
  }
  $('#changePasswordForm input[name*=username]').val(username);
  $('#addAuthorityForm input[name*=username]').val(username);
  $('#deleteAccountForm input[name*=username]').val(username);
  $('#authorities').append(authorities_del);
});
</pre>

<p>
<img src="../../../static/images/users-username.png" th:src="@{/static/images/users-username.png}" class="browser-output" alt="list table username click" />
</p>

<h4>비밀번호 변경</h4>

<pre class="prettyprint">$('#changePasswordForm').submit(function(e) {
  e.preventDefault();
  var username = $('#changePasswordForm input[name*=username]').val();
  if (!username) return;
  var pw = $('#changePasswordForm input[name*=password]').val();
  pw = pw.trim();
  if(!pw) return;
  var data = {
    "password": pw,
  };
  var jsonString = JSON.stringify(data);
  var url = link + "users/" + username;
  var method = "PATCH";
  $.ajax({
    url: url,
    type: method,
    data: jsonString,
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function () {
      console.log('pw change success!');
      $('#changePasswordForm input[name*=password]').val('');				
    },
    error: function (xhr, status, error) {
      console.log('error!');
      console.log(xhr.statusText);
    }
  });
});
</pre>

<p>
<img src="../../../static/images/users-pw.png" th:src="@{/static/images/users-pw.png}" class="browser-output" alt="change password" />
</p>

<p>
<img src="../../../static/images/edge-developer-tools.png" th:src="@{/static/images/edge-developer-tools.png}" alt="Edge developer-tools open" />
</p>

<p>
<img src="../../../static/images/edge-developer-tools-console.png" th:src="@{/static/images/edge-developer-tools-console.png}" alt="Edge developer-tools console" />
</p>

<h4>권한 삭제</h4>

<pre class="prettyprint">$(document).on('click', '.del-auth-link', function (e) {
  e.preventDefault();
  var authority = $(e.target).attr('title');
  var username = $('#addAuthorityForm input[name*=username]').val();
  if (!username) return;
  var url = link + "users/" + username + "/" + authority;
  $.ajax({
    url: url,
    type: 'DELETE',
    success: function () {
      $(e.target).remove();
      showListItems(username);
    },
    error: function(xhr, status, error) {
      console.log('error!');
      console.log(xhr.statusText);
    }
  });		
});
</pre>

<p>
<img src="../../../static/images/users-del-auth.png" th:src="@{/static/images/users-del-auth.png}" class="browser-output" alt="delete authority before" />
</p>

<p>
<img src="../../../static/images/users-del-auth2.png" th:src="@{/static/images/users-del-auth2.png}" class="browser-output" alt="delete authority after" />
</p>

<h4>권한 추가</h4>

<pre class="prettyprint">$('#addAuthorityForm').submit(function(e) {
  e.preventDefault();
  var username = $('#addAuthorityForm input[name*=username]').val();
  if (!username) return;
  var authority = $('#dropDownAuthority').val();
  var auth_dels = $('#authorities').text();
  var chk = auth_dels.indexOf(authority);
  if (chk != -1) return;
  var url = link + "users/" + username + "/" + authority;
  $.ajax({
    url: url,
    type: 'POST',
    success: function () {
      console.log('authority add success!');
      var addlink = ' &lt;a href="#" title="' + authority + '" class="del-auth-link"&gt;' + authority + ' x&lt;/a&gt; ';
      if(authority === 'ROLE_ADMIN') $('#authorities').prepend(addlink);
      else $('#authorities').append(addlink);
      showListItems(username);
    },
    error: function (xhr, status, error) {
      console.log('error!');
      console.log(xhr.statusText);
    }
  });
});
</pre>

<p>
<img src="../../../static/images/users-add-auth.png" th:src="@{/static/images/users-add-auth.png}" class="browser-output" alt="add authority before" />
</p>

<p>
<img src="../../../static/images/users-add-auth2.png" th:src="@{/static/images/users-add-auth2.png}" class="browser-output" alt="add authority after" />
</p>

<h4>계정 삭제</h4>

<pre class="prettyprint">$('#deleteAccountForm').submit(function(e) {
  e.preventDefault();
  var username = $('#deleteAccountForm input[name*=username]').val();
  if (!username) return;
  var url = link + "users/" + username;
  $.ajax({
    url: url,
    type: 'DELETE',
    success: function () {
      console.log('delete account success!');
      showListItems(username);
      $('#changePasswordForm input[name*=username]').val('');
      $('#addAuthorityForm input[name*=username]').val('');
      $('#deleteAccountForm input[name*=username]').val('');
      $('#authorities').empty();
    },
    error: function (xhr, status, error) {
      console.log('error!');
      console.log(xhr.statusText);
    }		
  });
});
</pre>

<p>
<img src="../../../static/images/users-del-account.png" th:src="@{/static/images/users-del-account.png}" class="browser-output" alt="delete account before" />
</p>

<p>
<img src="../../../static/images/users-del-account2.png" th:src="@{/static/images/users-del-account2.png}" class="browser-output" alt="delete account after" />
</p>

<h3>게시판 관리 RESTful URL</h3>

<pre style="border: 2px dotted grey;padding: 0.3em;">목록	GET	/boards?search=
생성	POST	/boards
수정	PATCH	/boards/chat
삭제	DELETE	/boards/chat
</pre>

<h3>게시판 관리 서버 구현</h3>

<div class="filename">RestBoardsController.java</div>
<pre class="prettyprint">package net.java_school.controller;

import java.util.List;

import net.java_school.board.Board;
import net.java_school.board.BoardService;

import org.springframework.beans.factory.annotation.Autowired;

import org.springframework.http.HttpStatus;

import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.DeleteMapping;
import org.springframework.web.bind.annotation.PatchMapping;
import org.springframework.web.bind.annotation.PutMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.ResponseStatus;

@RestController
@RequestMapping("boards")
public class RestBoardsController {

  @Autowired
  private BoardService boardService;

  @GetMapping
  public List&lt;Board&gt; getBoards(@RequestParam(name="search", defaultValue="") String search) {
    List&lt;Board&gt; boards = boardService.getBoards(search);
    return boards;
  }
  @PatchMapping("{boardCd}")
  @ResponseStatus(code=HttpStatus.NO_CONTENT)
  public void patchBoard(@PathVariable(name="boardCd") String boardCd, @RequestBody Board board) {
    if (board.getBoardNm() != null) {
      boardService.changeBoardName(boardCd, board.getBoardNm());
    }
    if (board.getBoardNm_ko() != null) {
      boardService.changeBoardKorName(boardCd, board.getBoardNm_ko());
    }
  }
  @PostMapping
  @ResponseStatus(code=HttpStatus.NO_CONTENT)
  public void createBoard(@RequestBody Board board) {
    boardService.createBoard(board);
  }
  @DeleteMapping("{boardCd}")
  @ResponseStatus(code=HttpStatus.NO_CONTENT)
  public void deleteBoard(@PathVariable(name="boardCd") String boardCd) {
    boardService.deleteBoard(boardCd);
  }
}
</pre>

<div class="filename">BoardService.java</div>
<pre class="prettyprint">@PreAuthorize("hasAnyRole('ADMIN','USER')")
public List&lt;Board&gt; getBoards(String search);
@PreAuthorize("hasRole('ADMIN')")
public void changeBoardName(String boardCd, String boardNm);
@PreAuthorize("hasRole('ADMIN')")
public void changeBoardKorName(String boardCd, String boardNm_ko);
@PreAuthorize("hasRole('ADMIN')")
public void createBoard(Board board);
@PreAuthorize("hasRole('ADMIN')")
public void deleteBoard(String boardCd);
</pre>

<div class="filename">BoardServiceImpl.java</div>
<pre class="prettyprint">@Override
public List&lt;Board&gt; getBoards(String search) {
  return boardMapper.selectAllBoards(search);
}
@Override
public void changeBoardName(String boardCd, String boardNm) {
  boardMapper.updateBoardName(boardCd, boardNm);
}
@Override
public void changeBoardKorName(String boardCd, String boardNm_ko) {
  boardMapper.updateBoardKorName(boardCd, boardNm_ko);
}
@Override
public void createBoard(Board board) {
  boardMapper.insertBoard(board);
}
@Override
public void deleteBoard(String boardCd) {
  boardMapper.deleteBoard(boardCd);
}
</pre>

<div class="filename">BoardMapper.java</div>
<pre class="prettyprint">public List&lt;Board&gt; selectAllBoards(@Param("search") String search);
public void updateBoardName(@Param("boardCd") String boardCd, @Param("boardNm") String boardNm);
public void updateBoardKorName(@Param("boardCd") String boardCd, @Param("boardNm_ko") String boardNm_ko);
public void insertBoard(Board board);
public void deleteBoard(@Param("boardCd") String boardCd);
</pre>

<div class="filename">BoardMapper.xml</div>
<pre class="prettyprint">&lt;select id="selectAllBoards" parameterType="string" resultType="net.java_school.board.Board"&gt;
  SELECT * FROM board
  &lt;if test="search != null and search != ''"&gt;
  WHERE boardCd LIKE '%' || #{search} || '%' 
      OR boardNm LIKE '%' || #{search} || '%' 
      OR boardNm_ko LIKE '%' || #{search} || '%'
  &lt;/if&gt;
  order by boardcd
&lt;/select&gt;
&lt;insert id="insertBoard" parameterType="net.java_school.board.Board"&gt;
  INSERT INTO board VALUES (#{boardCd}, #{boardNm}, #{boardNm_ko})
&lt;/insert&gt;
&lt;update id="updateBoardName" parameterType="string"&gt;
  UPDATE board SET boardNm = #{boardNm} WHERE boardCd = #{boardCd}
&lt;/update&gt;
&lt;update id="updateBoardKorName" parameterType="string"&gt;
  UPDATE board SET boardNm_ko = #{boardNm_ko} WHERE boardCd = #{boardCd}
&lt;/update&gt;
&lt;delete id="deleteBoard" parameterType="string"&gt;
  DELETE board WHERE boardCd = #{boardCd}
&lt;/delete&gt;
</pre>

<h3>게시판 관리 자바스크립트 구현</h3>

<h4>Search</h4>

<pre class="prettyprint">function showListItems(search) {
  if (search == null) search = '';
  var url = link + 'boards?search=' + search;
  $.getJSON(url, function (data) {
    $('#list-table .data-row').remove();
    $.each(data, function (i, item) {
      var trs = '&lt;tr class="data-row"&gt;'
        + '&lt;td&gt;' + (i+1) + '&lt;/td&gt;'
        + '&lt;td&gt;' + '&lt;a href="#" class=board-code&gt;' + item.boardCd + '&lt;/a&gt;&lt;/td&gt;'
        + '&lt;td&gt;' + item.boardNm + '&lt;/td&gt;'
        + '&lt;td&gt;' + item.boardNm_ko + '&lt;/td&gt;'
        + '&lt;/tr&gt;'
      $('#list-table').append(trs);
    });
  });
}
$(document).ready(function() {
  $('#searchForm').submit(function(e) {
    e.preventDefault();
    var search = $('#searchForm input[name*=search]').val();
    showListItems(search);
    $('#searchForm input[name*=search]').val('');
  });
});
</pre>

<pre class="prettyprint">$(document).on('click', '.board-code', function (e) {
  e.preventDefault();
  var boardCd = $(e.target).text();
  $('#editBoardForm input[name*=boardCd]').val(boardCd);
  $('#deleteBoardForm input[name*=boardCd]').val(boardCd);
});
</pre>

<p>
<img src="../../../static/images/boards-search.png" th:src="@{/static/images/boards-search.png}" class="browser-output" alt="처음 게시판 관리 페이지 요청" />
</p>

<p>
<img src="../../../static/images/boards-search1.png" th:src="@{/static/images/boards-search1.png}" class="browser-output" alt="검색어 입력없이 검색 버튼 클릭" />
</p>

<p>
<img src="../../../static/images/boards-search2.png" th:src="@{/static/images/boards-search2.png}" class="browser-output" alt="게시판 코드 클릭 " />
</p>

<h4>Edit Board</h4>

<pre class="prettyprint">$(document).ready(function() {
  //..검색 코드 생략 ..
  $('#name-btn').click(function(e) {
    var boardCd = $('#editBoardForm input[name*=boardCd]').val();
    if (!boardCd) return;
    var boardNm = $('#editBoardForm input[name*=boardNm]').val();
    boardNm = boardNm.trim();
    if(!boardNm) return;
    var data = {
      "boardNm": boardNm,
    };
    var jsonString = JSON.stringify(data);
    var url = link + "boards/" + boardCd;
    var method = "PATCH";
    $.ajax({
      url: url,
      type: method,
      data: jsonString,
      contentType: "application/json; charset=utf-8",
      dataType: "json",
      success: function () {
        showListItems(boardCd);
        console.log('board name change success!');
        $('#editBoardForm input[name*=boardNm]').val('');				
      },
      error: function (xhr, status, error) {
        console.log('error!');
        console.log(xhr.statusText);
      }
    });
  });
  $('#ko-name-btn').click(function(e) {
    var boardCd = $('#editBoardForm input[name*=boardCd]').val();
    if (!boardCd) return;
    var boardNm_ko = $('#editBoardForm input[name*=boardNm_ko]').val();
    boardNm_ko = boardNm_ko.trim();
    if(!boardNm_ko) return;
    var data = {
      "boardNm_ko": boardNm_ko,
    };
    var jsonString = JSON.stringify(data);
    var url = link + "boards/" + boardCd;
    var method = "PATCH";
    $.ajax({
      url: url,
      type: method,
      data: jsonString,
      contentType: "application/json; charset=utf-8",
      dataType: "json",
      success: function () {
        showListItems(boardCd);
        console.log('board kor name change success!');
        $('#editBoardForm input[name*=boardNm_ko]').val('');				
      },
      error: function (xhr, status, error) {
        console.log('error!');
        console.log(xhr.statusText);
      }
    });
  });
  
});
</pre>

<p>
<img src="../../../static/images/boards-edit.png" th:src="@{/static/images/boards-edit.png}" class="browser-output" alt="게시판 한글 이름 변경" />
</p>

<p>
<img src="../../../static/images/boards-edit2.png" th:src="@{/static/images/boards-edit2.png}" class="browser-output" alt="게시판 한글 이름 변경 성공 " />
</p>

<h4>New Board</h4>

<pre class="prettyprint">$(document).ready(function() {
  //.. 검색 코드 생략 ..
  //.. 수정 코드 생략 ..
  $('#newBoardForm').submit(function(e) {
    e.preventDefault();
    var boardCd = $('#newBoardForm input[name*=boardCd]').val();
    var boardNm = $('#newBoardForm input[name*=boardNm]').val();
    var boardNm_ko = $('#newBoardForm input[name*=boardNm_ko]').val();
    if (!boardCd) return;
    if (!boardNm) return;
    if (!boardNm_ko) return;
    var data = {
      "boardCd": boardCd,
      "boardNm": boardNm,
      "boardNm_ko": boardNm_ko,
    };
    var jsonString = JSON.stringify(data);
    var url = link + "boards";
    var method = "POST";
    $.ajax({
      url: url,
      type: method,
      data: jsonString,
      contentType: "application/json; charset=utf-8",
      dataType: "json",
      success: function () {
        console.log('create new board success!');
        $('#newBoardForm input[name*=boardCd]').val('');
        $('#newBoardForm input[name*=boardNm]').val('');
        $('#newBoardForm input[name*=boardNm_ko]').val('');
        showListItems(boardCd);
      },
      error: function (xhr, status, error) {
        console.log('error!');
        console.log(xhr.statusText);
      }
    });
  });
  
});
</pre>

<p>
<img src="../../../static/images/boards-new.png" th:src="@{/static/images/boards-new.png}" class="browser-output" alt="새 게시판 생성" />
</p>

<p>
<img src="../../../static/images/boards-new2.png" th:src="@{/static/images/boards-new2.png}" class="browser-output" alt="새 게시판 생성 성공 " />
</p>

<h4>Delete Board</h4>

<pre class="prettyprint">$(document).ready(function() {
  //..검색 코드 생략..
  //..수정 코드 생략..
  //..생성 코드 생략..  
  $('#deleteBoardForm').submit(function(e) {
    e.preventDefault();
    var boardCd = $('#deleteBoardForm input[name*=boardCd]').val();
    if (!boardCd) return;
    var url = link + "boards/" + boardCd;
    var method = "DELETE";
    $.ajax({
      url: url,
      type: method,
      success: function () {
        console.log('create new board success!');
        $('#editBoardForm input[name*=boardCd]').val('');
        $('#deleteBoardForm input[name*=boardCd]').val('');
        showListItems(boardCd);
      },
      error: function (xhr, status, error) {
        console.log('error!');
        console.log(xhr.statusText);
      }
    });
  });
  
});
</pre>

<p>
<img src="../../../static/images/boards-del.png" th:src="@{/static/images/boards-del.png}" class="browser-output" alt="게시판 삭제" />
</p>

<p>
<img src="../../../static/images/boards-del2.png" th:src="@{/static/images/boards-del2.png}" class="browser-output" alt="새 게시판 삭제 성공 " />
</p>
</article>

</body>
</html>